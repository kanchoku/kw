<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
<title>kw128</title>
<link href="style/kanchoku.css" type="text/css" rel="stylesheet" />
</head>
<body>
<h1><a name="label-0" id="label-0">漢直Win 1.28</a></h1><!-- RDLabel: "漢直Win 1.28" -->
<div class="version">
version 1.28 (2010-01-01)
</div>

<!-- mktoc: toc begin -->
<div class="toc">

<p>もくじ</p>
<ul>
<li><a href="#label-1">はじめに</a>
<ul>
<li><a href="#label-2">「漢直Win」とは</a></li>
<li><a href="#label-3">動作環境</a></li>
<li><a href="#label-4">制限事項</a></li>
<li><a href="#label-5">使用条件</a></li>
</ul></li>
<li><a href="#label-6">インストール</a></li>
<li><a href="#label-7">アンインストール</a></li>
<li><a href="#label-8">使用法</a>
<ul>
<li><a href="#label-9">全般的な使い方</a>
<ul>
<li><a href="#label-10">設定</a></li>
<li><a href="#label-15">起動</a></li>
<li><a href="#label-16">入力</a></li>
</ul></li>
<li><a href="#label-17">各入力方式の利用法</a>
<ul>
<li><a href="#label-18">T-Code を使う</a></li>
<li><a href="#label-19">TUT-Code を使う</a></li>
<li><a href="#label-20">G-Code を使う</a></li>
</ul></li>
</ul></li>
<li><a href="#label-21">補助機能</a>
<ul>
<li><a href="#label-22">部首合成変換</a>
<ul>
<li><a href="#label-23">部首を代表する文字</a></li>
<li><a href="#label-24">部首合成変換の例</a></li>
<li><a href="#label-25">部首合成変換辞書</a></li>
</ul></li>
<li><a href="#label-28">交ぜ書き変換</a>
<ul>
<li><a href="#label-29">強制練習モード</a></li>
<li><a href="#label-30">交ぜ書き変換辞書</a></li>
</ul></li>
<li><a href="#label-33">文字ヘルプ</a></li>
<li><a href="#label-34">熟語ガイド</a>
<ul>
<li><a href="#label-35">熟語ガイド辞書</a></li>
</ul></li>
<li><a href="#label-37">その他の機能</a>
<ul>
<li><a href="#label-38">かたかなの入力</a></li>
<li><a href="#label-43">全角モード</a></li>
<li><a href="#label-44">句読点の切り替え</a></li>
<li><a href="#label-45">ヒストリ入力</a></li>
<li><a href="#label-46">後置型の変換</a></li>
<li><a href="#label-53">半角かな変換</a></li>
<li><a href="#label-54">入力の統計</a></li>
<li><a href="#label-55">外字入力補助</a></li>
</ul></li>
</ul></li>
<li><a href="#label-56">カスタマイズ</a>
<ul>
<li><a href="#label-57">初期設定ファイル</a>
<ul>
<li><a href="#label-58">「漢直Win」の起動</a></li>
<li><a href="#label-63">入力方式</a></li>
<li><a href="#label-66">補助入力</a></li>
<li><a href="#label-77">文字入力</a></li>
<li><a href="#label-82">送出メッセージ</a></li>
<li><a href="#label-89">ウィンドウクラスごとに送出メッセージを指定</a></li>
<li><a href="#label-90">表示</a></li>
<li><a href="#label-96">その他</a></li>
</ul></li>
<li><a href="#label-108">キーボードファイル</a>
<ul>
<li><a href="#label-109">キーボードファイルの書式</a></li>
<li><a href="#label-110">キー番号</a></li>
<li><a href="#label-111">仮想キーコード</a></li>
<li><a href="#label-112">付属のキーボードファイル</a></li>
</ul></li>
<li><a href="#label-116">テーブルファイル</a>
<ul>
<li><a href="#label-117">テーブルファイルの書式</a></li>
<li><a href="#label-123">特殊定義の一覧</a></li>
<li><a href="#label-152">入力方式に固有の設定</a></li>
</ul></li>
</ul></li>
<li><a href="#label-156">変更履歴</a></li>
<li><a href="#label-170">「漢直Win 1.26」からの変更点</a></li>
<li><a href="#label-171">漢索窓</a>
<ul>
<li><a href="#label-172">「漢索窓」の使用法</a></li>
<li><a href="#label-173">「漢索窓」の設定ファイル</a></li>
</ul></li>
<li><a href="#label-179">関連 URL</a>
<ul>
<li><a href="#label-180">オリジナル版の漢直Win</a></li>
<li><a href="#label-181">各入力方式</a></li>
<li><a href="#label-182">直接入力ソフト</a></li>
</ul></li>
<li><a href="#label-183">謝辞</a></li>
</ul>
</div>
<!-- mktoc: toc end -->

<h2><a name="label-1" id="label-1">はじめに</a></h2><!-- RDLabel: "はじめに" -->
<h3><a name="label-2" id="label-2">「漢直Win」とは</a></h3><!-- RDLabel: "「漢直Win」とは" -->
<p>「漢直Win」は、Windows 上で<em>漢字直接入力</em>を行うためのツールです。
<a href="http://t.pos.to/tc/">徳岡宏樹</a> さんによって作製され、
現在はホスティングサービス Google Code などにおいて改良が加えられています。</p>
<p>このドキュメントでは、「漢直Win」バージョン 1.28 について解説します。</p>
<p>「漢直Win 1.28」の主な特徴は、次のとおりです。</p>
<ul>
<li>T-Code, TUT-Code, G-Code が使えます。</li>
<li>Shift を併用する打鍵に対応し、「き」等にも対応可能です。<span class="sup">[<a href="#label-156">ver1.28</a>]</span></li>
<li><a href="#label-22">部首合成変換</a>、<a href="#label-28">交ぜ書き変換</a>、<a href="#label-45">ヒストリ入力</a>
  などの補助入力が使えます。再帰的に組み合わせることも可能です。</li>
<li>補助入力した文字のコードを表示する<a href="#label-33">文字ヘルプ</a>が利用できます。</li>
<li><a href="#label-34">熟語ガイド</a>の入力補助が利用できます。<span class="sup">[<a href="#label-156">ver1.27a</a>]</span></li>
<li><a href="#label-54">入力の統計</a>を記録することができます。<span class="sup">[<a href="#label-156">ver1.27f</a>]</span></li>
</ul>
<p>なお、ここでは漢字直接入力そのものについては触れません。
漢字直接入力については、<a href="#label-179">関連 URL</a> を参照してください。</p>
<h3><a name="label-3" id="label-3">動作環境</a></h3><!-- RDLabel: "動作環境" -->
<p>Windows95 以降の Windows で動作するものと思われます。一部の機能は
Windows 95/98/Me への対応が困難であるものもあります。</p>
<h3><a name="label-4" id="label-4">制限事項</a></h3><!-- RDLabel: "制限事項" -->
<p>「漢直Win」は、まっとうな IME ではなく、
WM_CHAR などのメッセージを送りつけることで文字を入力する
という方法をとっています。
したがって、このようなメッセージに対応していないソフトでは、
「漢直Win」を利用することはできません。</p>
<p>たとえば、コマンドプロンプト (MS-DOS プロンプト) では、
入力を行うことができません。</p>
<p>特に、Windows 95/98/Me などの MS-DOS プロンプトでは、
「漢直Win」で入力しようとすると、
コンピュータがしばらく入力を受けつけなくなることがあります。
<em><em>MS-DOS プロンプトを使用する時は、
必ず「漢直Win」を OFF に してください。</em></em>
MS-DOS プロンプトでは、
「漢直Win」のトグルキー (<kbd>Ctrl</kbd>+<kbd>\</kbd>) も使えませんので、
「漢直Win」のウィンドウをクリックして OFF にしてください。</p>
<h3><a name="label-5" id="label-5">使用条件</a></h3><!-- RDLabel: "使用条件" -->
<p>このソフトは<em>無償</em>、<em>無保証</em>です。</p>
<p>「漢直Win」バージョン 1.27 の原型である、
オリジナル版の「漢直Win」バージョン 1.26
(<a href="http://t.pos.to/tc/">徳岡宏樹</a> さんの web ページより入手可能の 
kanwin126.zip) の使用条件は、
同パッケージに含まれるドキュメント kanchoku.txt によると、
以下のようなものです。</p>
<p>kanchoku.txt</p>
<pre>●ソフトの使用条件
  このソフトは使用も配布も自由ですが、このソフトを使用したことによって
何か問題が発生しても、作者も関係者もなんら責任を負いません。自己責任で
使用してください。</pre>
<p>一方、「漢直Win」バージョン 1.27 の部首合成変換のコード 
(bushu_dic.c) は、
<a href="http://www.tcp-ip.or.jp/~tagawa/archive/">tserv-0.2</a> の comp.c 
に基づくものであり、
さらにこの comp.c は、
<a href="http://www.gnu.org/licenses/gpl.html">GNU GPL</a>
ライセンスの tc.el を原型としているとあります。</p>
<p>bushu_dic.c</p>
<pre>/*
  このプログラムの原型は, tc.el から作られました.  tc.el の Copyright
  は以下の通りです.
;;
;; T-Code frontend for Nemacs.
;; Author : Yasushi Saito (yasushi@is.s.u-tokyo.ac.jp)
;;          Kaoru Maeda   (kaoru@is.s.u-tokyo.ac.jp)
;;
;; Department of Information Science
;; Faculty of Science, University of Tokyo
;; 7-3-1 Hongo, Bunkyo-ku, 113 Tokyo, Japan
;;
;; Copyright (C) 1989, 1990, 1991 Yasushi Saito and Kaoru Maeda.
;;

;; This program is free software; you can redistribute it and/or modify
;; it under the terms of the GNU General Public License version 1
;; as published by the Free Software Foundation.
;;
;; This program is distributed in the hope that it will be useful,
;; but WITHOUT ANY WARRANTY; without even the implied warranty of
;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;; GNU General Public License for more details.
;;
;; You should have received a copy of the GNU General Public License
;; along with this program; if not, write to the Free Software
;; Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
*/</pre>
<p>以上のことから、結果として、「漢直Win」1.27 の利用は、
<a href="http://www.gnu.org/licenses/gpl.html">GNU GPL</a> に
従うべきものと考えられます。</p>
<h2><a name="label-6" id="label-6">インストール</a></h2><!-- RDLabel: "インストール" -->
<p>インストールするには、
「漢直Win」のパッケージに含まれている以下のファイルを、
同じフォルダに置いてください。</p>
<ul>
<li>kanchoku.exe … 「漢直Win」本体</li>
<li>kansaku.exe … 「<a href="#label-171">漢索窓</a>」本体</li>
<li>kanchoku.ini … <a href="#label-57">初期設定ファイル</a> </li>
<li>106.key, 101.key, dvorak.key …<a href="#label-108">キーボードファイル</a></li>
<li>t.tbl, tut.tbl, g.tbl … <a href="#label-116">テーブルファイル</a></li>
<li>kwbushu.rev … <a href="#label-25">部首合成変換辞書</a></li>
<li>kwmaze.dic … <a href="#label-30">交ぜ書き変換辞書</a></li>
<li>kwgg.dic … <a href="#label-35">熟語ガイド辞書</a> <span class="sup">[<a href="#label-156">ver1.27a</a>]</span></li>
<li>kanchar.dll … 補助 DLL <span class="sup">[<a href="#label-156">ver1.27f</a>]</span></li>
<li>wininfo.exe … ウィンドウクラス名調査ツール <span class="sup">[<a href="#label-156">ver1.27f</a>]</span></li>
<li>kwstyle.exe … 配色・フォントカスタマイズツール <span class="sup">[<a href="#label-156">ver1.28</a>]</span></li>
</ul>
<p>通常は、アーカイブ (kw128*.zip) を解凍したフォルダを、
適当な場所に設置すればよいでしょう。
必要に応じて、実行ファイルのショートカットを作成しておくと便利です。</p>
<h2><a name="label-7" id="label-7">アンインストール</a></h2><!-- RDLabel: "アンインストール" -->
<p>アンインストールは、インストールしたファイルを削除するだけです。</p>
<p>補助 DLL (kanchar.dll) が削除できずに、残ってしまう場合は、
Windows を再起動した後にもう一度削除してみてください。</p>
<p>「漢直Win」と同じフォルダに生成される kwrecord.txt, kwstat.txt は、
<a href="#label-54">入力の統計</a>を記録したファイルです。必要がなければ削除してもかまいません。</p>
<p>なお、「漢直Win」は、レジストリを使用しません。</p>
<h2><a name="label-8" id="label-8">使用法</a></h2><!-- RDLabel: "使用法" -->
<h3><a name="label-9" id="label-9">全般的な使い方</a></h3><!-- RDLabel: "全般的な使い方" -->
<h4><a name="label-10" id="label-10">設定</a></h4><!-- RDLabel: "設定" -->
<p>デフォルトでは、Windows XP で、
<em>日本語キーボード (106 配列, 109 配列) で T-Code を</em>
使用する設定になっています。
その他の組み合わせで使用するには、
初期設定ファイル (kanchoku.ini) を変更する必要があります。
「メモ帳」などのエディタで kanchoku.ini を開いて、
以下のような変更を行い、保存してください。</p>
<dl>
<dt><a name="label-11" id="label-11">TUT-Code を使用するとき</a></dt><!-- RDLabel: "TUT-Code を使用するとき" -->
<dd>
<code>tableFile=t.tbl</code> と書いてある行を、
<code>tableFile=<em>tut.tbl</em></code> と変更
</dd>
<dt><a name="label-12" id="label-12">G-Code を使用するとき</a></dt><!-- RDLabel: "G-Code を使用するとき" -->
<dd>
<code>tableFile=t.tbl</code> と書いてある行を、
<code>tableFile=<em>g.tbl</em></code> と変更
</dd>
<dt><a name="label-13" id="label-13">英語キーボード (101 配列, 104 配列) を使用するとき</a></dt><!-- RDLabel: "英語キーボード (101 配列, 104 配列) を使用するとき" -->
<dd>
<code>keyboard=106.tbl</code> と書いてある行を、
<code>keyboard=<em>101.tbl</em></code> と変更
</dd>
<dt><a name="label-14" id="label-14">Windows 95/98/Me で使用するとき</a></dt><!-- RDLabel: "Windows 95/98/Me で使用するとき" -->
<dd>
<code>outputMethod=0</code> と書いてある行 (のうち、最初のもの) を、
<code>outputMethod=<em>1</em></code> と変更
</dd>
</dl>
<h4><a name="label-15" id="label-15">起動</a></h4><!-- RDLabel: "起動" -->
<p>kanchoku.exe のアイコンをダブルクリックで起動します。
起動すると「漢直Win」のウィンドウ (<em>仮想鍵盤</em>と呼びます) が現れ、
タスクトレイにも「漢直Win」のアイコンが表示されます (図左)。</p>
<p>起動直後は、OFF の状態です。
この状態で<em>ホットキー</em> <kbd>Ctrl</kbd>+<kbd>\</kbd> を押すと ON になります (図右)。
もう一度 <kbd>Ctrl</kbd>+<kbd>\</kbd> を押すと OFF に戻ります。
ホットキーのかわりに、
仮想鍵盤やタスクトレイのアイコンを左クリックしてもかまいません。</p>
<table class="figure" summary="仮想鍵盤の図示">
<caption>仮想鍵盤―― OFF のとき (左) と ON のとき (右)</caption>
<tr>
<td>
<img src="img/mode_off.png" alt="OFF 時の表示" title="OFF 時の表示" />
</td>
<td>
<img src="img/mode_on.png" alt="ON 時の表示" title="ON 時の表示" />
</td>
</tr>
</table>

<h4><a name="label-16" id="label-16">入力</a></h4><!-- RDLabel: "入力" -->
<p>ON の時にキーを押すと、仮想鍵盤上に文字が表示されます (図)。
さらにキーを打鍵すると、仮想鍵盤の対応するキー位置に表示されている文字が、
アクティブなウィンドウに入力されます。</p>
<table class="figure" summary="入力中の仮想鍵盤の図示">
<caption>入力中の仮想鍵盤</caption>
<tr>
<td>
<img src="img/input.png" alt="入力中の仮想鍵盤" title="入力中の仮想鍵盤" />
</td>
</tr>
</table>

<ul>
<li>仮想鍵盤と実際のキーボードのキーの対応は、
  <a href="#label-110">キー番号</a> を参照してください。</li>
<li>仮想鍵盤では、打鍵したキーは、
  順に <span class="bgred">赤</span> → <span class="bggrn">緑</span> → <span class="bgyel">黄</span> と彩色表示されます。
  <span class="bgblu">青</span> は二回打鍵したキーです。配色は、<a href="#label-33">文字ヘルプ</a> と共通です。</li>
<li><p>仮想鍵盤上の <span class="fgtel">深緑色の文字</span> は、特別な機能キーを表しています。
  主な機能キーには、次のようなものがあります。</p>
<ul>
<li><kbd>□</kbd> … 続きのストロークがあるキー (TUT-Code の 3 ストローク文字など)</li>
<li><kbd>ア</kbd> … <a href="#label-39">かたかなモード</a> 切り替え</li>
<li><kbd>◆</kbd> … <a href="#label-22">部首合成変換</a></li>
<li><kbd>◇</kbd> … <a href="#label-28">交ぜ書き変換</a></li>
</ul>
<p>次のような機能キーもあります。</p>
<ul>
<li><kbd>全</kbd> … <a href="#label-43">全角モード</a> 切り替え</li>
<li><kbd>句</kbd> … <a href="#label-44">句読点の切り替え</a></li>
<li><kbd>替</kbd> … <a href="#label-39">かたかなモード</a> 切り替え (<kbd>ア</kbd> と同じ)</li>
<li><kbd>×</kbd> … 部首合成や交ぜ書き変換の中断</li>
<li><kbd>◎</kbd> … <a href="#label-45">ヒストリ入力</a></li>
<li><kbd>≪</kbd> … <a href="#label-33">文字ヘルプ</a> (戻る)</li>
<li><kbd>≫</kbd> … <a href="#label-33">文字ヘルプ</a> (進む)</li>
<li><kbd>部</kbd> … <a href="#label-47">後置型の部首合成変換</a></li>
<li><kbd>変</kbd> … <a href="#label-48">後置型の交ぜ書き変換</a></li>
<li><kbd>カ</kbd> … <a href="#label-49">後置型のかたかな変換</a></li>
<li><kbd>ヵ</kbd> … <a href="#label-49">後置型のかたかな変換</a> (先頭から数文字をひらがなのまま残す)</li>
<li><kbd>か</kbd> … <a href="#label-49">後置型のかたかな変換</a> (直前の後置型のかたかな変換を縮める)</li>
<li><kbd>・</kbd> … 第 1 打鍵のキーの入力</li>
</ul></li>
<li>仮想鍵盤上の <span class="fgppl">紫色の文字</span> は、
  <a href="#label-34">熟語ガイド</a><span class="sup">[<a href="#label-156">ver1.27a</a>]</span> です 。
  紫色の表示のキーを順に打鍵すると、その文字を入力できます。</li>
<li>仮想鍵盤中央の縦長の長方形の部分 (<em>ミニバッファ</em>と呼びます) には、
  変換の際に読みなどが表示されます。
  また、ミニバッファの色は、入力の状態を表しています。
<ul>
<li><span class="bggry">灰</span> … 通常の入力モード</li>
<li><span class="bggrn">緑</span> … 変換入力モード (<a href="#label-22">部首合成変換</a> または <a href="#label-28">交ぜ書き変換</a>)</li>
<li><span class="bgblu">青</span> … 候補選択モード (<a href="#label-28">交ぜ書き変換</a> または <a href="#label-45">ヒストリ入力</a>)</li>
<li><span class="bgyel">黄</span> … 文字ヘルプ表示モード</li>
</ul></li>
<li>文字キー以外のキー操作は、次のとおりです。
<ul>
<li><kbd>BackSpace</kbd>, <kbd>Esc</kbd> … 
    第 2 打鍵以降で打鍵されたとき、それまでの打鍵を取り消します。</li>
<li><kbd>Enter</kbd> … 
    第 2 打鍵以降で打鍵されたとき、それまでの打鍵を取り消してから、
    <kbd>Enter</kbd> そのものを入力します。</li>
<li><kbd>Tab</kbd> … 
    第 2 打鍵以降で打鍵されたとき、第 1 打鍵のキーを入力します。</li>
<li>上記のいずれのキーも、第 1 打鍵で打鍵されたときは、
    そのキーの本来の働きをします。</li>
</ul></li>
</ul>
<h3><a name="label-17" id="label-17">各入力方式の利用法</a></h3><!-- RDLabel: "各入力方式の利用法" -->
<h4><a name="label-18" id="label-18">T-Code を使う</a></h4><!-- RDLabel: "T-Code を使う" -->
<p>「漢直Win」での T-Code のキー割り当ては、次のとおりです
(キーの表記は日本語キーボードの場合、かっこ内は英語キーボードの場合)。</p>
<ul>
<li><kbd>j</kbd><kbd>f</kbd> … <a href="#label-22">部首合成変換</a></li>
<li><kbd>f</kbd><kbd>j</kbd> … <a href="#label-28">交ぜ書き変換</a></li>
<li><kbd>3</kbd><kbd>2</kbd> … <a href="#label-44">句読点の切り替え</a></li>
<li><kbd>3</kbd><kbd>3</kbd> … <a href="#label-43">全角モード</a> 切り替え</li>
<li><kbd>4</kbd><kbd>4</kbd> … <a href="#label-33">文字ヘルプ</a> (戻る)</li>
<li><kbd>4</kbd><kbd>5</kbd> … <a href="#label-33">文字ヘルプ</a> (進む)</li>
<li><kbd>9</kbd><kbd>9</kbd> … 部首合成変換や交ぜ書き変換の中断</li>
<li><kbd>7</kbd><kbd>7</kbd> … <a href="#label-47">後置型の部首合成変換</a></li>
<li><kbd>1</kbd><kbd>8</kbd> ～ <kbd>9</kbd><kbd>8</kbd> … 
  <a href="#label-48">後置型の交ぜ書き変換</a> (読みが 1 ～ 9 文字)</li>
<li><kbd>6</kbd><kbd>6</kbd> … <a href="#label-45">ヒストリ入力</a></li>
<li><kbd>:</kbd> (<kbd>'</kbd>) … <a href="#label-45">ヒストリ入力</a></li>
<li><kbd>Space</kbd> … (第 2 打鍵で押されたとき) 第 1 打鍵のキーの入力</li>
</ul>
<h4><a name="label-19" id="label-19">TUT-Code を使う</a></h4><!-- RDLabel: "TUT-Code を使う" -->
<p>TUT-Code を使うには、あらかじめ<a href="#label-10">設定</a>をしておいてください。</p>
<p><kbd>@</kbd> キーで、<em>かたかなモード</em>をトグルします。
また、<a href="#label-57">初期設定ファイル</a> kanchoku.ini の
<code><em>;</em>shiftKana=1</code>
と書いてある行を
<code>shiftKana=1</code>
のように変更しておくと、
シフトキーでかたかなを入力できるようになります。</p>
<p>「漢直Win」での TUT-Code のキー割り当ては、次のとおりです
(キーの表記は日本語キーボードの場合、かっこ内は英語キーボードの場合)。</p>
<ul>
<li><kbd>a</kbd><kbd>l</kbd><kbd>a</kbd> … <a href="#label-22">部首合成変換</a></li>
<li><kbd>a</kbd><kbd>l</kbd><kbd>j</kbd> … <a href="#label-28">交ぜ書き変換</a></li>
<li><kbd>-</kbd> … <a href="#label-33">文字ヘルプ</a> (戻る)</li>
<li><kbd>^</kbd> (<kbd>=</kbd>) … <a href="#label-33">文字ヘルプ</a> (進む)</li>
<li><kbd>@</kbd> (<kbd>[</kbd>) … <a href="#label-39">かたかなモード</a> 切り替え</li>
<li><kbd>[</kbd> (<kbd>]</kbd>) … <a href="#label-44">句読点の切り替え</a></li>
<li><kbd>:</kbd> (<kbd>'</kbd>) … <a href="#label-28">交ぜ書き変換</a></li>
<li><kbd>]</kbd> (<kbd>`</kbd>) … <a href="#label-22">部首合成変換</a></li>
<li><kbd>_</kbd> (なし) … <a href="#label-45">ヒストリ入力</a></li>
</ul>
<h4><a name="label-20" id="label-20">G-Code を使う</a></h4><!-- RDLabel: "G-Code を使う" -->
<p>G-Code を使うには、を使うには、あらかじめ<a href="#label-10">設定</a>をしておいてください。</p>
<p>「漢直Win」での G-Code のキー割り当ては、次のとおりです
(キーの表記は日本語キーボードの場合、かっこ内は英語キーボードの場合)。</p>
<ul>
<li><kbd>7</kbd><kbd>4</kbd> … <a href="#label-22">部首合成変換</a></li>
<li><kbd>4</kbd><kbd>7</kbd> … <a href="#label-28">交ぜ書き変換</a></li>
<li><kbd>3</kbd><kbd>2</kbd> … <a href="#label-44">句読点の切り替え</a></li>
<li><kbd>3</kbd><kbd>3</kbd> … <a href="#label-43">全角モード</a> 切り替え</li>
<li><kbd>4</kbd><kbd>4</kbd> … <a href="#label-33">文字ヘルプ</a> (戻る)</li>
<li><kbd>4</kbd><kbd>5</kbd> … <a href="#label-33">文字ヘルプ</a> (進む)</li>
<li><kbd>9</kbd><kbd>9</kbd> … 部首合成変換や交ぜ書き変換の中断</li>
<li><kbd>7</kbd><kbd>7</kbd> … <a href="#label-47">後置型の部首合成変換</a></li>
<li><kbd>1</kbd><kbd>8</kbd> ～ <kbd>9</kbd><kbd>8</kbd> … 
  <a href="#label-48">後置型の交ぜ書き変換</a> (読みが 1 ～ 9 文字)</li>
<li><kbd>6</kbd><kbd>6</kbd> … <a href="#label-45">ヒストリ入力</a></li>
<li><kbd>:</kbd> (<kbd>'</kbd>) … <a href="#label-45">ヒストリ入力</a></li>
</ul>
<h2><a name="label-21" id="label-21">補助機能</a></h2><!-- RDLabel: "補助機能" -->
<p>直接入力できない文字 (コードが割り当てられていない文字) は、
「<em>外字</em>」と呼ばれます。
「漢直Win」では、外字を入力するための補助入力手段として、
T-Code でよく使われている、
<a href="#label-22">部首合成変換</a>と<a href="#label-28">交ぜ書き変換</a>の機能を提供しています。
補助入力は、
打ち方の分からない文字を入力するのにも利用することができます。</p>
<h3><a name="label-22" id="label-22">部首合成変換</a></h3><!-- RDLabel: "部首合成変換" -->
<p>部首合成変換とは、2 つの文字を組み合わせて 1 文字を入力する方法です。
たとえば、「日 + 生」→「星」のように入力を行います。
「字形組み合わせ入力」とも呼ばれます。</p>
<p>部首合成変換を活用するには、
組み合わせの部品となる漢字を、ある程度覚えておく必要があります。
しかし、文字の意味や読みを考えずに入力することができ、
また、候補選択の必要もないという特徴があります。</p>
<p>「漢直Win」での部首合成変換の手順は、次のとおりです。</p>
<ol>
<li>仮想鍵盤上の「<kbd>◆</kbd>」のキーを打鍵します。
    「<kbd>◆</kbd>」は、T-Code では <kbd>j</kbd><kbd>f</kbd>, 
    TUT-Code では <kbd>a</kbd><kbd>l</kbd><kbd>a</kbd> に割り当てられています。</li>
<li>すると、<em>部首合成変換モード</em> に入り、
    ミニバッファに部首合成変換の開始を示す「◆」が表示されます。</li>
<li>続けて、組み合わせる 2 文字を順に入力します。
    入力した文字は、いったんミニバッファに保持され、
    合成が行われた時点で対象ソフトに送られます
    (2 文字目が入力された瞬間に変換が行われるので、
    2 文字目はミニバッファに表示されません)。</li>
</ol>
<table class="figure" summary="部首合成変換の図示">
<caption>部首合成変換</caption>
<tr>
<td>
<img src="img/bushu.png" alt="部首合成変換" title="部首合成変換" />
</td>
</tr>
</table>

<ul>
<li>入力された文字が合成できないときは、2 文字目の入力は捨てられ、
  引き続き 2 文字目の入力待ちの状態になります。</li>
<li>変換アルゴリズムの違いなどによって、
  他の T-Code ドライバ (特に <a href="#label-182">tc2</a>) と
  同じ変換結果にならないことがあります。
  <a href="#label-66">補助入力</a> の <code>bushuAlgo</code> の解説も参照してください。</li>
<li>部首合成変換モードでのキー操作は、次のとおりです。
<ul>
<li><kbd>BackSpace</kbd> … 入力した文字を消去</li>
<li><kbd>Esc</kbd> … 部首合成変換を中断する</li>
</ul></li>
<li>部首合成した結果が、直接入力できる文字である (外字でない) ときは、
  その文字のコードを表す打鍵図が仮想鍵盤に表示されます (<a href="#label-33">文字ヘルプ</a>)。</li>
<li>部首合成した結果が外字であるときは、<a href="#label-45">ヒストリ入力</a> の対象になります。</li>
</ul>
<h4><a name="label-23" id="label-23">部首を代表する文字</a></h4><!-- RDLabel: "部首を代表する文字" -->
<p>部首合成変換では、部品としてよく使われる文字を覚えておくと便利です。
以下に、部首を代表する文字を挙げておきます
(<a href="#label-182">tc2</a> の info より引用)。</p>
<pre>ア、院→こざとへん　　イ→にんべん　　　　　ウ→うかんむり
エ→工　　　　　　　　オ→てへん　　　　　　サ→くさがんむり
シ→さんずい　　　　　ヌ→又　　　　　　　　ネ→しめすへん
リ→りっとう　　　　　レ→礼のつくり　　　　ロ→口(くち)
ワ→わかんむり　　　　ン→にすい　　　　　　部→おおざと
性→りっしんべん　　　独→けものへん　　　　四→あみがしら
図→くにがまえ　　　　之→しんにょう</pre>
<h4><a name="label-24" id="label-24">部首合成変換の例</a></h4><!-- RDLabel: "部首合成変換の例" -->
<p>部首合成変換の例を、いくつか挙げておきましょう。</p>
<p>文字の足し算</p>
<pre>「◆木木」→「林」　　「◆木甘」→「柑」
「◆金建」→「鍵」　　「◆甘木」→「某」</pre>
<p>文字の引き算</p>
<pre>「◆終糸」→「冬」　　「◆遺之」→「貴」
「◆買四」→「貝」　　「◆優イ」→「憂」</pre>
<p>文字の一部分の合成</p>
<pre>「◆黒然」→「黙」　　「◆監見」→「覧」
「◆避土」→「壁」　　「◆四掛」→「罫」</pre>
<p>意味や読み</p>
<pre>「◆しめ」→「〆」　　「◆木3」→「森」
「◆郵便」→「〒」　　「◆黒四」→「◆」</pre>
<p>再帰的な合成</p>
<pre>「◆◆上七ル」→「◆虍ル」→「虎」
「◆四◆土土ト」→「◆四◆圭ト」→「◆四卦」→「罫」</pre>
<p>個々の文字の具体的な合成のしかたについては、
部首合成変換辞書 kwbushu.rev を参照してください。</p>
<h4><a name="label-25" id="label-25">部首合成変換辞書</a></h4><!-- RDLabel: "部首合成変換辞書" -->
<h5><a name="label-26" id="label-26">付属の部首合成辞書</a></h5><!-- RDLabel: "付属の部首合成辞書" -->
<p>付属の部首合成変換辞書 kwbushu.rev は、
<a href="#label-182">tc2</a> (バージョン 2.3.1) のパッケージに含まれている 
bushu.rev に、以下の変更を行ったものです。</p>
<ul>
<li>symbol.rev (記号類の定義) をマージ</li>
<li>全角モードでの変換のために、「<code>3３</code>」のような半角/全角の等価定義を追加</li>
<li>コード変換 (Shift-JIS, CR/LF)</li>
</ul>
<h5><a name="label-27" id="label-27">部首合成辞書の書式</a></h5><!-- RDLabel: "部首合成辞書の書式" -->
<p>部首合成変換辞書の書式は、
以下のいずれかの定義を 1 行に 1 つずつ書いたものです。</p>
<ul>
<li><p>「<code>CAB</code>」の形の定義 … 
  「C ::= A + B」(A と B を組み合わせると C になる) の意味。
  たとえば、次は、「日 + 音 → 暗」という定義を表します。</p>
<pre>暗日音</pre></li>
<li><p>「<code>CA</code>」の形の定義 … 
  「A ≡ C」(A は C のかわりになる) の意味。
  たとえば、次は、
  「院」(部首合成ではこざとへんを表す文字) を使うべきところで、
  「ア」をかわりに使ってもよいことを表します。</p>
<pre>院ア</pre></li>
</ul>
<p>部首合成辞書を書き換える場合は、
重複する定義を避け、またソートしておくようにしましょう。
「漢直Win」の現在の仕様では、ソートされていなくてもかまいませんが、
他のドライバと辞書を共用する場合に、問題になることがあります。</p>
<h3><a name="label-28" id="label-28">交ぜ書き変換</a></h3><!-- RDLabel: "交ぜ書き変換" -->
<p>交ぜ書き変換とは、一般のかな漢字変換と同様に、
漢字の読みを入力して変換する方法ですが、
読みに漢字を含めることができるのが特徴です。
このことにより、すでに覚えた漢字を活用して候補を絞りこむことができます。</p>
<p>たとえば、「記者」と入力したい場合、
「記しゃ」「き者」などの“読み”で変換することができます。
この場合、「貴社」「汽車」「帰社」などの候補は現れないので、
誤変換を避けることができます。</p>
<p>ただし、「漢直Win」の交ぜ書き変換では、次のような制限があります。</p>
<ul>
<li>単語変換 (単文節変換) である</li>
<li><del>読みに活用語尾を含めることができない</del></li>
<li>変換結果を学習しない</li>
<li>辞書に対して登録や削除ができない</li>
</ul>
<p>「漢直Win」での交ぜ書き変換の手順は、次のとおりです。</p>
<ol>
<li>仮想鍵盤上の「<kbd>◇</kbd>」のキーを入力します。
    「<kbd>◇</kbd>」は、T-Code では <kbd>f</kbd><kbd>j</kbd>,
    TUT-Code では <kbd>a</kbd><kbd>l</kbd><kbd>j</kbd> に割り当てられています。</li>
<li>すると、<em>交ぜ書き変換モード</em> に入り、
    ミニバッファに、交ぜ書き変換の開始を示す「◇」が表示されます。</li>
<li>続けて読みを入力します (図左)。</li>
<li><kbd>Space</kbd> を押すと、変換が実行され、<em>候補選択モード</em> に入ります。
    変換変補が仮想鍵盤に表示されますので (図右)、
    対応するキーを押して、選択します。</li>
</ol>
<table class="figure" summary="交ぜ書き変換の図示">
<caption>交ぜ書き変換――読みの入力 (左) と候補の選択 (右)</caption>
<tr>
<td>
<img src="img/maze_yomi_kisha.png" alt="交ぜ書き・「き社」の読み" title="交ぜ書き・「き社」の読み" />
</td>
<td>
<img src="img/maze_cand_kisha.png" alt="交ぜ書き・「き社」の候補" title="交ぜ書き・「き社」の候補" />
</td>
</tr>
</table>

<ul>
<li>旧字や異体字への変換、再帰的な変換もできます。
<ul>
<li>「<kbd>◇</kbd>学」→「學」</li>
<li>「<kbd>◇</kbd><kbd>◇</kbd>まん」→「<kbd>◇</kbd>万」→「萬」</li>
</ul></li>
<li><p><del>活用する語 (形容詞、動詞、形容動詞など) は、
  語尾を取り除いて、変化しない部分 (語幹) を読みとして入力します
  (「送りがなを除いた部分」ではありません)。</del></p>
<p><del>たとえば、「楽しい」は「たのし」で、「走る」は「はし」の読みで
変換してください。
</del></p></li>
<li>活用語を変換するときは、<kbd>&lt;</kbd> で語幹を伸ばし、
  <kbd>&gt;</kbd> で縮めます<span class="sup">[<a href="#label-156">ver1.27f</a>]</span>。</li>
<li>候補選択モードの表示は、実際には変換候補の個数によって変わります。
<ul>
<li><del>変換候補が 1 つのときは、(候補選択モードにならずに) すぐに
    対象ソフトに入力されます。</del></li>
<li>変換候補が 1 つのときは、確定動作なしに続きの入力ができます。<span class="sup">[<a href="#label-156">ver1.27f</a>]</span></li>
<li>変換候補が 10 以下のときは、縦長の枠に候補が列挙されます (下図左)。
    対応する列のキー (ホームポジションの段の) で選択します。</li>
<li>変換候補が 10 を超えるときは、通常の仮想鍵盤の 30 キーに
    候補が表示されます (下図右)。</li>
</ul></li>
<li>交ぜ書き変換した結果が、直接入力できる文字である (外字でない) ときは、
  その文字のコードを表す打鍵図が仮想鍵盤に表示されます (<a href="#label-33">文字ヘルプ</a>)。</li>
<li>交ぜ書き変換した結果が外字であるときは、
  <a href="#label-45">ヒストリ入力</a> の対象になります。</li>
<li>交ぜ書き変換モードでのキー操作は、次のとおりです。
<ul>
<li><kbd>Space</kbd> … 変換を実行する (候補選択モードに入る)</li>
<li><kbd>BackSpace</kbd> … 読みを 1 文字消去する</li>
<li><kbd>Esc</kbd> … 交ぜ書き変換を中断する</li>
<li><kbd>Enter</kbd> … 読みを無変換のまま確定し、対象ソフトに入力する</li>
<li><kbd>Tab</kbd> … 読みをひらがな/かたかな変換し、対象ソフトに入力する</li>
</ul></li>
<li>候補選択モードでのキー操作は、次のとおりです。
<ul>
<li><kbd>Space</kbd> … 次の候補群へ進む</li>
<li><kbd>BackSpace</kbd> … 前の候補群へ戻る。
    最初まで戻ったら、読み入力状態 (交ぜ書き変換モード) に戻る</li>
<li><kbd>Esc</kbd> … 読み入力状態に戻る</li>
<li><kbd>Enter</kbd> … 読みを無変換のまま確定し、対象ソフトに入力する</li>
<li><kbd>Tab</kbd> … 読みをひらがな/かたかな変換し、対象ソフトに入力する</li>
<li><kbd>&lt;</kbd> … 語幹を伸ばす<span class="sup">[<a href="#label-156">ver1.27f</a>]</span></li>
<li><kbd>&gt;</kbd> … 語幹を縮める<span class="sup">[<a href="#label-156">ver1.27f</a>]</span></li>
</ul></li>
<li>変換候補が 1 つの場合でのキー操作は、次のとおりです。<span class="sup">[<a href="#label-156">ver1.27f</a>]</span>
<ul>
<li><kbd>BackSpace</kbd> … 読み入力状態 (交ぜ書き変換モード) に戻る</li>
<li><kbd>Esc</kbd> … 読み入力状態に戻る</li>
<li><kbd>Enter</kbd> … 候補を確定し、対象ソフトに入力する</li>
<li><kbd>Tab</kbd> … 読みをひらがな/かたかな変換し、対象ソフトに入力する</li>
<li><kbd>&lt;</kbd> … 語幹を伸ばす</li>
<li><kbd>&gt;</kbd> … 語幹を縮める</li>
<li>その他 … 候補を確定し、対象ソフトに入力し、続けてそのストロークが第一打鍵となる</li>
</ul></li>
</ul>
<table class="figure" summary="候補選択モードの図示">
<caption>候補選択モード・候補数が少ない場合 (左) と多い場合 (右)</caption>
<tr>
<td>
<img src="img/maze_cand_awa.png" alt="交ぜ書き・「あわ」の候補選択" title="交ぜ書き・「あわ」の候補選択" />
</td>
<td>
<img src="img/maze_cand_kou.png" alt="交ぜ書き・「こう」の候補選択" title="交ぜ書き・「こう」の候補選択" />
</td>
</tr>
</table>

<h4><a name="label-29" id="label-29">強制練習モード</a></h4><!-- RDLabel: "強制練習モード" -->
<p>強制練習モード<span class="sup">[<a href="#label-156">ver1.28</a>]</span> は、交ぜ書き変換により得られた候補を
<a href="#label-34">熟語ガイド</a> と同様のガイド表示に従って絞り込みながら直接入力してゆく方法です。</p>
<p>「漢直Win」のデフォルトの設定では、強制練習モードは無効になっています。
強制練習モードを使用するには、<a href="#label-57">初期設定ファイル</a> kanchoku.ini の
<code><em>;</em>maze2gg=1</code>
と書いてある行を
<code>maze2gg=1</code>
のように変更してください。
あるいは、<a href="#label-116">テーブルファイル</a> の特殊定義<code>@g</code> を用いることで、標準モードと
強制練習モードを切り替えることができます。</p>
<table class="figure" summary="強制練習モードの図示">
<caption>強制練習モード・変換直後の状態</caption>
<tr>
<td>
<img src="img/maze2gg_kansya.png" alt="交ぜ書き・「かんしゃ」の候補選択" title="交ぜ書き・「かんしゃ」の候補選択" />
</td>
<td>
<img src="img/maze2gg_ippou.png" alt="交ぜ書き・「いっぽう」の候補選択" title="交ぜ書き・「いっぽう」の候補選択" />
</td>
</tr>
</table>

<ul>
<li>読みの先頭が直接入力できている場合 (練習不要) や、変換結果の文字が一意でありかつ外字の場合
  (練習不可能) などでは、そこまで入力済みとなりその次の文字からの練習動作になります。</li>
<li>次に入力する文字が一意の場合、ガイドに加えて打鍵方法が
  <a href="#label-33">文字ヘルプ</a> と同様の彩色で示されます。また、前置型変換モードの中でない場合は
  <kbd>Tab</kbd> を押すと補完動作となり、選択肢が分かれる直前までの分が入力されます。
<ul>
<li><code>conjugationalMaze=2</code> では変換直後は語幹操作モードになるため、入力を開始するか
    <kbd>Enter</kbd> を押さないと <kbd>Tab</kbd>  はひらがな/かたかな変換の動作になります。</li>
</ul></li>
<li>語幹操作モードでのキー操作は、次のとおりです。
<ul>
<li><kbd>BackSpace</kbd> … 読み入力状態 (交ぜ書き変換モード) に戻る</li>
<li><kbd>Esc</kbd> … 読み入力状態に戻る</li>
<li><kbd>Enter</kbd> … 語幹の長さを確定し、練習入力状態に進む</li>
<li><kbd>Tab</kbd> … 読みをひらがな/かたかな変換し、対象ソフトに入力する</li>
<li><kbd>&lt;</kbd> … 語幹を伸ばす</li>
<li><kbd>&gt;</kbd> … 語幹を縮める</li>
<li>その他 … 練習入力状態に進み、そのストロークが第一打鍵となる</li>
</ul></li>
</ul>
<p>変換結果を直接入力する関係上、外字の入力が困難になります。常用する場合は、
<a href="#label-34">熟語ガイド</a> と <a href="#label-55">外字入力補助</a> を有効にするといいでしょう。</p>
<h4><a name="label-30" id="label-30">交ぜ書き変換辞書</a></h4><!-- RDLabel: "交ぜ書き変換辞書" -->
<h5><a name="label-31" id="label-31">付属の交ぜ書き変換辞書</a></h5><!-- RDLabel: "付属の交ぜ書き変換辞書" -->
<p>付属の交ぜ書き変換辞書 kwmaze.dic は、
<a href="#label-182">tc2</a> (バージョン 2.3.1) 
のパッケージに含まれている交ぜ書き変換辞書作成キットで作成し、
コード変換 (Shift-JIS, CR/LF) したものです。
T-Code か TUT-Code の 2 ストローク漢字であれば、
読みに含めることができます
(補足 … CERTAIN (漢字で入力しなければならない文字集合) として空集合を、
また UNCERTAIN (漢字で入力してもかなで入力してもよい文字集合) として、
T-Code の基本文字の漢字集合 (1159 字) と 
TUT-Code の 2 ストローク漢字集合 (725 字) の和集合に、
漢字に準じる 3 文字「々〆〇」を加えた計 1183 字を指定して作成したもの)。</p>
<p>なお、交ぜ書き変換辞書は、本来、
ユーザ自身が各自の習熟度に合わせて作成するべきものです。
完全に覚えてしまった漢字を辞書から削除することで、
変換効率を上げることができ、辞書のサイズも小さくすることができるからです。
交ぜ書き変換辞書の作成法については、<a href="#label-182">tc2</a> の
パッケージのドキュメントを参照してください。</p>
<h5><a name="label-32" id="label-32">交ぜ書き変換辞書の書式</a></h5><!-- RDLabel: "交ぜ書き変換辞書の書式" -->
<p>交ぜ書き変換辞書の書式は、
次のようなエントリを 1 行に 1 つずつ書いたものです。</p>
<pre>&lt;読み&gt; /&lt;候補&gt;/&lt;候補&gt;/…/&lt;候補&gt;/</pre>
<p>つまり、</p>
<ul>
<li>読み</li>
<li>半角空白を 1 つ</li>
<li>候補を、スラッシュ (<code>/</code>) で区切って並べたもの (両端にもスラッシュが必要)</li>
</ul>
<p>を、順に並べたものです。
たとえば、次のように書きます。</p>
<pre>かん字 /換字/漢字/</pre>
<p>活用する語は、</p>
<pre>かんじ― /感じ/</pre>
<p>のように、活用語尾を、全角ダッシュ (<code>―</code>) で表記します。</p>
<p>読みに空白を含めたり、候補にスラッシュを含めたりすることは
(おそらく) できません。</p>
<p>交ぜ書き変換辞書を書き換える場合は、
重複する定義を避け、またソートしておくようにしましょう。
「漢直Win」の現在の仕様では、ソートされていなくてもかまいませんが、
他のドライバと辞書を共用する場合に、問題になることがあります。</p>
<h3><a name="label-33" id="label-33">文字ヘルプ</a></h3><!-- RDLabel: "文字ヘルプ" -->
<p><a href="#label-22">部首合成変換</a> や <a href="#label-28">交ぜ書き変換</a> で入力した文字の中に、
直接入力できる文字があった場合、
自動的にその文字の打鍵図が表示されます。</p>
<table class="figure" summary="文字ヘルプの図示">
<caption>文字ヘルプ</caption>
<tr>
<td>
<img src="img/bushu_help.png" alt="文字ヘルプ" title="文字ヘルプ" />
</td>
</tr>
</table>

<p>打鍵図における、記号と彩色の意味は次のとおりです。
記号は <a href="#label-182">tc2</a> とほぼ同様の割り当て、
彩色は「<a href="#label-171">漢索窓</a>」と共通です。</p>
<ul>
<li><kbd><span class="bgred">●</span></kbd> (赤) … 第 1 打鍵</li>
<li><kbd><span class="bggrn">○</span></kbd> (緑) … 第 2 打鍵</li>
<li><kbd><span class="bgyel">△</span></kbd> (黄) … 第 3 打鍵</li>
<li><kbd><span class="bggry">◇</span></kbd> (灰) … 第 4 打鍵 (またはそれ以降の打鍵)</li>
<li><kbd><span class="bgblu">◎</span></kbd> (青) … 2 回打鍵するキー</li>
<li><kbd><span class="bgcyn">☆</span></kbd> (水) … 3 回打鍵するキー (または別の 2 回打鍵するキー)</li>
</ul>
<p>交ぜ書き変換で、文字が複数ある場合、
仮想鍵盤上の「<kbd>≪</kbd>」のキーを押すと、2 文字目以降の打鍵図を表示します。
「<kbd>≪</kbd>」は、T-Code では <kbd>4</kbd><kbd>4</kbd>, TUT-Code では <kbd>-</kbd> に
割り当てられています。</p>
<p>続けて「<kbd>≪</kbd>」を押すと、以前に文字ヘルプの対象になった文字の打鍵図を、
さかのぼって表示します。
また、「<kbd>≫</kbd>」と表示されているキーを押すと、逆方向に表示します。
「<kbd>≫</kbd>」は、T-Code では <kbd>4</kbd><kbd>5</kbd>,
TUT-Code では <kbd>^</kbd> (英語キーボードの場合は <kbd>=</kbd>) 
に割り当てられています。</p>
<p>打鍵図は、入力を続行すると消えますが、
「<kbd>≪</kbd>」または「<kbd>≫</kbd>」のキーを押すことで、
再度表示することができます。</p>
<p>なお、外字 (直接入力できない文字) や、
交ぜ書き変換の読みに含まれていた文字は無視され、
文字ヘルプの対象にはなりません。</p>
<h3><a name="label-34" id="label-34">熟語ガイド</a></h3><!-- RDLabel: "熟語ガイド" -->
<p>熟語ガイド<span class="sup">[<a href="#label-156">ver1.27a</a>]</span> は、
熟語を入力する時に、2 文字目以降の文字の打ち方を
仮想鍵盤上に表示する補助機能です。</p>
<p>「漢直Win」のデフォルトの設定では、熟語ガイドは無効になっています。
熟語ガイドを使用するには、<a href="#label-57">初期設定ファイル</a> kanchoku.ini の
<code><em>;</em>gg=kwgg.dic</code>
と書いてある行を
<code>gg=kwgg.dic</code>
のように変更してください。</p>
<table class="figure" summary="熟語ガイドの図示">
<caption>熟語ガイド</caption>
<tr>
<td>
<img src="img/gg.png" alt="熟語ガイド" title="熟語ガイド" />
</td>
</tr>
</table>

<ul>
<li>漢字を入力した後、その漢字に続く文字の候補が、
  仮想鍵盤上に紫色で表示されます。</li>
<li>候補が表示される位置は、各文字の第 1 打鍵の位置です。
  該当するキーを打鍵すると、第 2 打鍵の位置が紫色で表示されますので、
  引き続きキーを入力します。</li>
<li>仮想鍵盤の表示が変わる (紫色の表示の部分) だけで、
  文字の打ち方自体は変わりません。</li>
<li>仮想鍵盤の同じキーに、複数の候補が重複している場合は、
  「<kbd>２</kbd>」や「<kbd>３</kbd>」などのように表示されます。</li>
<li>実際にガイドされる文字は、<a href="#label-35">熟語ガイド辞書</a> で決められます。</li>
</ul>
<h4><a name="label-35" id="label-35">熟語ガイド辞書</a></h4><!-- RDLabel: "熟語ガイド辞書" -->
<p>「漢直Win 1.27a」のパッケージには、熟語ガイド辞書のサンプルとして、
kwgg.dic を付属しました。
kwgg.dic は、交ぜ書き変換辞書 kwmaze.dic から、
漢字を含むすべての連なりを機械的に拾い出して作成したものです。</p>
<p>特に高頻度の漢字に対しては、候補の重複により、
「<kbd>２</kbd>」や「<kbd>３</kbd>」のように表示されてしまうことが多いようです。
すでに覚えてしまった漢字や
直接入力するつもりのない漢字を
熟語ガイド辞書から削除することにより、
熟語ガイドの精度を向上できるかも知れません。</p>
<h5><a name="label-36" id="label-36">熟語ガイド辞書の書式</a></h5><!-- RDLabel: "熟語ガイド辞書の書式" -->
<p>熟語ガイドの書式は、次のような形式の行を並べたものとなっているようです。</p>
<pre>&lt;文字列&gt; /&lt;文字の並び&gt;</pre>
<p><code>&lt;文字列&gt;</code> の後に続く可能性のある文字を、
<code>&lt;文字の並び&gt;</code> として、半角空白・空角スラッシュの後に
並べて書きます。
例えば、</p>
<pre>不可 /解限欠思能避分</pre>
<p>というエントリが辞書にあるとき、「不可」と入力した後に
「解限欠思能避分」の各文字のガイドが表示されることになります。</p>
<p>エントリはソートされている必要はありませんが、重複していてはいけません。
なお、熟語ガイド辞書は、いわゆる外字 (ストロークを割り当てられていない文字
のこと) を含んでいてもかまいません。</p>
<p><span class="sup">[<a href="#label-156">ver1.27e</a>]</span>
次のように、一行でマッチ対象パターンを複数指定することもできます。</p>
<pre>ぁ ぃ ぅ ぇ ぉ あ い う え お /ぁぃぅぇぉあいうえお</pre>
<h3><a name="label-37" id="label-37">その他の機能</a></h3><!-- RDLabel: "その他の機能" -->
<p>その他の機能を説明します。</p>
<h4><a name="label-38" id="label-38">かたかなの入力</a></h4><!-- RDLabel: "かたかなの入力" -->
<p>TUT-Code で、かたかなを入力するには、
次のような方法があります。</p>
<dl>
<dt><a name="label-39" id="label-39">かたかなモード</a></dt><!-- RDLabel: "かたかなモード" -->
<dd>
<p>仮想鍵盤上の「<kbd>ア</kbd>」のキーを押すと、かたかなモードになります。
このモードで、ひらがなを入力すると、かたかなに変換されて入力されます。
「<kbd>ア</kbd>」は、<kbd>@</kbd> (英語キーボードの場合は <kbd>[</kbd>) 
に割り当てられています。</p>
<p>もう一度「<kbd>ア</kbd>」のキーを押すと、ひらがなモードに戻ります。</p>
</dd>
<dt><a name="label-40" id="label-40">シフト打鍵による入力</a></dt><!-- RDLabel: "シフト打鍵による入力" -->
<dd>
<a href="#label-57">初期設定ファイル</a> にて、オプション <code>shiftKana=1</code> と指定すると、
シフトキーを押しながらひらがなを入力することで、
かたかなを入力することができるようになります。
<del>
ただし、このオプションを指定すると、本来シフトキーを用いて入力する文字
(大文字や記号など) は入力できなくなります。
</del>
なお、シフト打鍵は、かな文字の入力に使うキーだけを「漢直Win」側で取り、
それ以外のキーのシフト打鍵は、
通常の打鍵として扱われます<span class="sup">[<a href="#label-156">ver1.27a</a>]</span>。
</dd>
<dt><a name="label-41" id="label-41">交ぜ書き変換のかたかな変換</a></dt><!-- RDLabel: "交ぜ書き変換のかたかな変換" -->
<dd>
<p><a href="#label-28">交ぜ書き変換</a> の読み入力モードで、入力したひらがなを
<kbd>Tab</kbd> によりかたかなに変換して入力することができます。</p>
<p>なお、この場合、変換したかたかなは <a href="#label-45">ヒストリ入力</a> の対象になります。</p>
</dd>
<dt><a name="label-42" id="label-42">後置型のかたかな変換を使ってかたかなに変換</a></dt><!-- RDLabel: "後置型のかたかな変換を使ってかたかなに変換" -->
<dd>
<a href="#label-116">テーブルファイル</a> で <a href="#label-49">後置型のかたかな変換</a> を割り当てた
キーを押すと、後置型でかたかな変換ができます。
</dd>
</dl>
<h4><a name="label-43" id="label-43">全角モード</a></h4><!-- RDLabel: "全角モード" -->
<p>仮想鍵盤上の「<kbd>全</kbd>」のキーを押すと、
全角モードになります。
このモードでは、テーブルに定義されている
半角の数字や記号が、全角に変換されて入力されます。
「<kbd>全</kbd>」は、T-Code では <kbd>3</kbd><kbd>3</kbd> に割り当てられています。</p>
<p>もう一度「<kbd>全</kbd>」のキーを押すと、半角モードに戻ります。</p>
<h4><a name="label-44" id="label-44">句読点の切り替え</a></h4><!-- RDLabel: "句読点の切り替え" -->
<p>仮想鍵盤上の「<kbd>句</kbd>」のキーを押すと、
句読点を「、。」から「，．」に変更できます。
「<kbd>句</kbd>」は、T-Code では <kbd>3</kbd><kbd>2</kbd>,
TUT-Code では <kbd>[</kbd> (英語キーボードの場合は <kbd>]</kbd>) 
に割り当てられています。</p>
<p>もう一度「<kbd>句</kbd>」のキーを押すと、もとの句読点に戻ります。</p>
<h4><a name="label-45" id="label-45">ヒストリ入力</a></h4><!-- RDLabel: "ヒストリ入力" -->
<p>ヒストリ入力は、最近に入力した文字を再入力するための補助入力です。
部首合成変換で入力した文字や、交ぜ書き変換で入力した熟語を、
一時的にキャッシュしておいて、必要なときに呼び出すことができます。</p>
<p>変換入力した文字のうち、以下のいずれかの条件を満たすものが、
ヒストリに残されます。</p>
<ul>
<li>外字 (直接入力できない文字) を少なくとも 1 文字含んでいる</li>
<li>3 文字以上の長さである</li>
</ul>
<p>仮想鍵盤上の「<kbd>◎</kbd>」のキー
を打鍵すると、<em>ヒストリ入力モード</em> になり、
最近変換入力した文字が仮想鍵盤に表示されます (図)。
「<kbd>◎</kbd>」は、T-Code では <kbd>:</kbd> (英語キーボードの場合は
<kbd>'</kbd>) に割り当てられています。</p>
<p>この状態でキーを押すと、仮想鍵盤上の対応する列の候補が入力されます。
また、<kbd>Esc</kbd>, <kbd>Space</kbd>, <kbd>Enter</kbd> のいずれかのキーを押すと、
もとの通常入力モードに戻ります。</p>
<table class="figure" summary="ヒストリ入力の図示">
<caption>ヒストリ入力</caption>
<tr>
<td>
<img src="img/hist.png" alt="ヒストリ入力" title="ヒストリ入力" />
</td>
</tr>
</table>

<ul>
<li><span class="bgcyn">背景が水色の候補</span>は直前にヒストリに追加されたもの、
  また、<span class="fgred">赤字の候補</span>は最近呼び出されたことがあるものを示しています。</li>
<li>ヒストリには 10 個まで候補が保存されます。
  10 個を超えた場合は、最近呼び出されなかったもの (すなわち、
  赤字でない候補) から上書きされます。</li>
<li>交ぜ書き変換で、無変換で確定 (<kbd>Enter</kbd>) したものや、
  ひらがな/かたかな変換で確定 (<kbd>Tab</kbd>) したものについても、
  3文字以上であれば、ヒストリの対象になります。</li>
</ul>
<h4><a name="label-46" id="label-46">後置型の変換</a></h4><!-- RDLabel: "後置型の変換" -->
<p>すでに説明した <a href="#label-22">部首合成変換</a> と <a href="#label-28">交ぜ書き変換</a> は、いずれも、
変換する読みや部品を入力する前にモードを指定する、<em>前置型</em> の変換でした。</p>
<p>これとは逆の <em>後置型</em> の変換もあります。
後置型では、まず変換する読みや部品を直接入力します。
そのあとで所定の変換キーを押すと、カーソルの直前の文字が変換されます。</p>
<p>「漢直Win」でも後置型の変換を利用可能ですが、
次のような制限があります。</p>
<ul>
<li>「漢直Win」は、
  実際にカーソルのある位置の文字を見て変換しているわけではなく、
  内部のバッファに記憶している読みをもとに変換を行います。
  したがって、
  カーソルを移動したり「漢直Win」をいったん OFF にしたりしたあとでは、
  期待した動作を行いません。</li>
<li><kbd>BackSpace</kbd> による文字の消去には、一応は対応していますが、
  完全ではありません。</li>
<li><p>変換を実行したあと、すでに入力されている読みを消去するために、
  <kbd>BackSpace</kbd> を対象ソフトに送っています。
  したがって、ソフトによってはうまく動かないことがあります。
  また、<kbd>BackSpace</kbd> を送るタイミングによって、
  文字が正常に置き換えられない場合があるようです。</p>
<p>変換後の文字が消去されて変換前の文字が残ってしまう場合、
<a href="#label-57">初期設定ファイル</a> の「<code>outputSleep=<var>n</var></code>」オプションで、
<var>n</var> の値を大きくすると、
改善できることがあります<span class="sup">[<a href="#label-156">ver1.27a</a>]</span>。</p></li>
<li>後置型の交ぜ書き変換の場合、読みの文字数を明示的に指定する必要があります。</li>
</ul>
<p>なお、前置型の変換の途中で、
ミニバッファの内容に対して後置型の変換を行えます<span class="sup">[<a href="#label-156">ver1.27c</a>]</span>。</p>
<h5><a name="label-47" id="label-47">後置型の部首合成変換</a></h5><!-- RDLabel: "後置型の部首合成変換" -->
<p>T-Code 用テーブルファイル t.tbl では、<kbd>7</kbd><kbd>7</kbd> に
この機能が割り当てられています。
仮想鍵盤では「<kbd>部</kbd>」と表示されます。</p>
<p><kbd>7</kbd><kbd>7</kbd> と打鍵すると、カーソル直前の 2 文字が合成され、変換結果で
置き換えられます。
続けて <kbd>7</kbd><kbd>7</kbd> を実行することにより、さらに変換結果を用いた部首合成変換
が行えます。</p>
<h5><a name="label-48" id="label-48">後置型の交ぜ書き変換</a></h5><!-- RDLabel: "後置型の交ぜ書き変換" -->
<p>T-Code 用テーブルファイル t.tbl では、<kbd>1</kbd><kbd>8</kbd> ～ <kbd>9</kbd><kbd>8</kbd> に
この機能が割り当てられています。
それぞれ読みの長さが 1 文字 ～ 9 文字の交ぜ書き変換に対応し、
いずれも仮想鍵盤では「<kbd>変</kbd>」と表示されます。</p>
<p>部首合成変換と同様に、変換結果を用いてさらに変換を行うことができます。</p>
<h5><a name="label-49" id="label-49">後置型のかたかな変換</a></h5><!-- RDLabel: "後置型のかたかな変換" -->
<p>未割り当てです。</p>
<p>以下の3種類があります。</p>
<dl>
<dt><a name="label-50" id="label-50">対象の長さを指定</a></dt><!-- RDLabel: "対象の長さを指定" -->
<dd>
かたかなに変換する文字数を指定します。
</dd>
<dt><a name="label-51" id="label-51">対象の長さを指定しない</a></dt><!-- RDLabel: "対象の長さを指定しない" -->
<dd>
ひらがなや「ー」が続く間、かたかな変換対象にします。
</dd>
<dt><a name="label-52" id="label-52">ひらがなとして残す長さを指定</a></dt><!-- RDLabel: "ひらがなとして残す長さを指定" -->
<dd>
<p>ひらがなや「ー」が続く間、かたかな変換対象にしますが、
指定された文字数はかたかなに変換しないでひらがなとして残します。
かたかなに変換する文字列が長くて文字数を数えるのが面倒な場合向けです。</p>
<p>「例えばあぷりけーしょん」→(2文字を残して変換)
→「例えばアプリケーション」</p>
</dd>
</dl>
<p>また、後置型のかたかな変換を行った直後であれば、
かたかな文字列を縮めることも可能です。</p>
<p>「例えばあぷりけーしょん」→(対象の長さ指定無しで変換)
→「例エバアプリケーション」→(かたかな文字列を1文字縮める)
→「例えバアプリケーション」→(かたかな文字列を1文字縮める)
→「例えばアプリケーション」</p>
<h4><a name="label-53" id="label-53">半角かな変換</a></h4><!-- RDLabel: "半角かな変換" -->
<p><span class="sup">[<a href="#label-156">ver1.27f</a>]</span>
<a href="#label-57">初期設定ファイル</a> kanchoku.ini で、</p>
<pre>enableHankakuKana=1</pre>
<p>と指定した場合、
<a href="#label-43">全角モード</a> でかたかなを入力すると、
半角かなに変換されます。</p>
<h4><a name="label-54" id="label-54">入力の統計</a></h4><!-- RDLabel: "入力の統計" -->
<p><span class="sup">[<a href="#label-156">ver1.27f</a>]</span>
<a href="#label-57">初期設定ファイル</a> kanchoku.ini で、</p>
<pre>record=kwrecord.txt
stat=kwstat.txt</pre>
<p>のように、記録ファイル名を指定すると、入力文字の統計を取ることができます。</p>
<p>kwrecord.txt には、次のような書式で記録されます。</p>
<pre>Dec 25 18:26  文字:   56  部首:   0(0%)  交ぜ書き:   0(0%)  機能:   0(0%)
Dec 25 18:37  文字:  190  部首:   0(0%)  交ぜ書き:   0(0%)  機能:   0(0%)
Dec 25 18:50  文字:  508  部首:   0(0%)  交ぜ書き:   0(0%)  機能:   0(0%)
…</pre>
<p>各項目の意味は以下のとおりです。</p>
<ul>
<li>日付・時刻 … 漢直Win を終了した時刻</li>
<li>文字 … 直接入力した文字数</li>
<li>部首 … 部首合成で入力した文字数 (の全打鍵数に対する割合)</li>
<li>交ぜ書き … 交ぜ書きで入力した文字数 (の全打鍵数に対する割合)</li>
<li>機能 … 特殊機能 (補助入力、文字ヘルプ、かなモードなど) を
  使用した回数 (の全打鍵数に対する割合)</li>
</ul>
<p>一方、 kwstat.txt には、次のような書式で記録されます。</p>
<pre>、      137     0
。      126     0
あ      31      0
い      216     0
う      77      0
…      …      …
愛      2       0
悪      7       0
圧      2       0
…      …      …</pre>
<p>フィールドは Tab で区切られ、各フィールドの意味は、左から順に、</p>
<ul>
<li>対象文字</li>
<li>直接入力した回数</li>
<li>補助入力した回数 (部首合成、交ぜ書きなど)</li>
</ul>
<p>です。</p>
<ul>
<li>kwrecord.txt には、
  漢直Win を終了するごとに、そのセッションでの入力記録が、
  追加して書き込まれます。</li>
<li>kwstat.txt には、
  漢直Win を終了するごとに、過去の入力情報を含めた累計の統計が、
  上書きして書き込まれます。</li>
<li>kwrecord.txt の書式は、
  <a href="#label-182">tc2</a> の .tc-record の書式に倣っています。
  日付は、年を含まないことに注意してください。</li>
<li>部首合成や交ぜ書きの読みとして入力した文字も、
  直接入力した文字数に含まれます。
  たとえば、「<kbd>◇</kbd>き社」の読みで「貴社」と交ぜ書き変換した場合、
  直接入力で入力した文字は「き(1)」「社(1)」の計 2 文字、
  交ぜ書きで入力した文字は「貴(1)」「社(1)」の計 2 文字、
  特殊機能を使用した回数は 1 回、とカウントされます。</li>
</ul>
<h4><a name="label-55" id="label-55">外字入力補助</a></h4><!-- RDLabel: "外字入力補助" -->
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>
熟語ガイドを有効にしたうえで、<a href="#label-57">初期設定ファイル</a> kanchoku.ini で、</p>
<pre>prefixautoassign=-46&gt;</pre>
<p>のように(<a href="#label-117">テーブルファイルの書式</a>の矢印定義形式を参照のこと)
キー番号の並びを指定すると、熟語ガイド辞書に含まれている外字を入力
したい状況になった場合に、該当する外字が、指定したキー番号並びで始まる
打鍵に一時的に自動で割り当てられます。</p>
<ul>
<li>テーブルファイルの該当するストロークは空定義かブロック定義である必要があります。
  ブロック定義の中が完全に空である必要はありません。</li>
</ul>
<h2><a name="label-56" id="label-56">カスタマイズ</a></h2><!-- RDLabel: "カスタマイズ" -->
<p>「漢直Win」のカスタマイズに関連するファイルは、
次の 3 種です。</p>
<ul>
<li><a href="#label-57">初期設定ファイル</a> (kanchoku.ini)</li>
<li><a href="#label-108">キーボードファイル</a> (106.key, 101.key など)</li>
<li><a href="#label-116">テーブルファイル</a> (t.tbl, tut.tbl など)</li>
</ul>
<p><a href="#label-57">初期設定ファイル</a> (kanchoku.ini) は、
「漢直Win」の動作を設定する設定ファイルです。
通常は、このファイルを編集するだけでよいでしょう。</p>
<p><a href="#label-108">キーボードファイル</a> (*.key) は、
「漢直Win」で使用するキーを設定する設定ファイルです。
通常は、このファイルを変更する必要はありませんが、
特殊なキーボードを使用したり、キーレイアウトを変更したりしている場合は、
キーボードファイルを編集したり、
新しく作成したりする必要があるかも知れません。</p>
<p><a href="#label-116">テーブルファイル</a> (*.tbl) は、
T-Code や TUT-Code などの入力方式の、
文字とストロークの対応を定義する設定ファイルです。
部首合成や交ぜ書き変換、かたかなモードなどの機能キーの割り当ても、
このファイルで設定します。
また、独自のコードを作成する場合は、
テーブルファイルを新しく作成することになります。</p>
<h3><a name="label-57" id="label-57">初期設定ファイル</a></h3><!-- RDLabel: "初期設定ファイル" -->
<p>初期設定ファイル kanchoku.ini は、
「漢直Win」の動作を設定する設定ファイルです。</p>
<p>使用する入力方式 (T-Code, TUT-Code など) や
キーボードを指定するには、この設定ファイルを編集します。</p>
<ul>
<li>kanchoku.ini の書式は、Windows で一般的に用いられる INI 形式です。</li>
<li>セミコロン (<code>;</code>) から行末までは、コメントとして読みとばされます。</li>
<li><p>「漢直Win」の設定オプションは、
  <code>[kanchoku]</code> セクションに記述します。</p>
<p>■<code>[kansaku]</code> セクションには、
<a href="#label-171">漢索窓</a> の設定オプションを記述する場所なので、ここには
「漢直Win」の設定を書かないようにしましょう。□</p></li>
</ul>
<h4><a name="label-58" id="label-58">「漢直Win」の起動</a></h4><!-- RDLabel: "「漢直Win」の起動" -->
<p>「漢直Win」の起動に関するオプションです。</p>
<dl>
<dt><a name="label-59" id="label-59"><code>hotKey=<var>xx</var></code></a></dt><!-- RDLabel: "hotKey=xx" -->
<dd>
<p>[kanchoku.ini のデフォルト: dc (すなわち、<kbd>Ctrl</kbd>+<kbd>\</kbd>); 省略時: dc]</p>
<p><var>xx</var> に、ホットキー (ON/OFF のトグルに使用するキー) を、
16 進表記の <a href="#label-111">仮想キーコード</a> で指定します。
ここで指定したキーと、<kbd>Ctrl</kbd> を同時に押すことで、ON/OFF をトグルします。</p>
<p>たとえば、<kbd>Ctrl</kbd>+<kbd>Space</kbd> をホットキーにするには、
次のように記述します。</p>
<pre>hotKey=20</pre>
</dd>
<dt><a name="label-60" id="label-60"><code>unmodifiedHotKey=<var>xx</var></code></a></dt><!-- RDLabel: "unmodifiedHotKey=xx" -->
<dd>
<p>[kanchoku.ini のデフォルト: (なし); 省略時: (なし)]</p>
<p><span class="sup">[<a href="#label-156">ver1.27d</a>]</span>
<code>hotKey=<var>xx</var></code> と同様ですが、
ここで設定したホットキーは単独で働き、<kbd>Ctrl</kbd> を押す必要がありません。</p>
<p>たとえば、<kbd>変換</kbd> キーをホットキーにするには、
次のように記述します。</p>
<pre>unmodifiedHotKey=1c</pre>
</dd>
</dl>
<p><code>hotKey=<var>xx</var></code> と <code>unmodifiedHotKey=<var>xx</var></code> の指定は両立します。
たとえば、</p>
<pre>hotKey=1c
unmodifiedHotKey=1c</pre>
<p>と記述すれば、<kbd>変換</kbd> と <kbd>Ctrl</kbd>+<kbd>変換</kbd> の両方が
ホットキーになります。</p>
<dl>
<dt><a name="label-61" id="label-61"><code>offHotKey=<var>xx</var></code></a></dt><!-- RDLabel: "offHotKey=xx" -->
<dd>
<p>[kanchoku.ini のデフォルト: (なし); 省略時: (なし)]</p>
<p><var>xx</var> に、「漢直Win」を OFF にするキーを、
16 進表記の <a href="#label-111">仮想キーコード</a> で指定します。
ここで指定したキーと、<kbd>Ctrl</kbd> を同時に押すことで、
「漢直Win」を OFF にします。</p>
<p><code>offHotKey=<var>xx</var></code> を指定した場合、
<code>hotKey=<var>xx</var></code> で指定したキーは、
ON/OFF のトグルではなく、ON にするキーとして働きます。</p>
</dd>
<dt><a name="label-62" id="label-62"><code>unmodifiedOffHotKey=<var>xx</var></code></a></dt><!-- RDLabel: "unmodifiedOffHotKey=xx" -->
<dd>
<p>[kanchoku.ini のデフォルト: (なし); 省略時: (なし)]</p>
<p><code>offHotKey=<var>xx</var></code> と同様ですが、
ここで設定したホットキーは単独で働き、<kbd>Ctrl</kbd> を押す必要がありません。</p>
<p><code>unmodifiedOffHotKey=<var>xx</var></code> を指定した場合、
<code>unmodifiedHotKey=<var>xx</var></code> で指定したキーは、
ON/OFF のトグルではなく、ON にするキーとして働きます。</p>
</dd>
</dl>
<p>ホットキーに設定したキー (<kbd>Ctrl</kbd>+<kbd>\</kbd> や <kbd>変換</kbd> など) は、
つねに「漢直Win」が取ってしまうので、
(「漢直Win」を終了しない限りは) ソフトに渡すことはできなくなります。
<em><em>キーは慎重に選んでください。</em></em></p>
<h4><a name="label-63" id="label-63">入力方式</a></h4><!-- RDLabel: "入力方式" -->
<p>入力方式関連のオプションです。</p>
<dl>
<dt><a name="label-64" id="label-64"><code>keyboard=<var>file</var></code></a></dt><!-- RDLabel: "keyboard=file" -->
<dd>
<p>[kanchoku.ini のデフォルト: 106.key; 省略時: 106.key]</p>
<p><var>file</var> に、<a href="#label-108">キーボードファイル</a> を指定します。</p>
<ul>
<li>106.key … 日本語配列のキーボード (106 配列、109 配列)</li>
<li>101.key … 英語配列のキーボード (101 配列、104 配列)</li>
<li>dvorak.key … Dvorak 配列のキーボード</li>
</ul>
</dd>
<dt><a name="label-65" id="label-65"><code>tableFile=<var>file</var></code></a></dt><!-- RDLabel: "tableFile=file" -->
<dd>
<p>[kanchoku.ini のデフォルト: t.tbl; 省略時: t.tbl]</p>
<p><var>file</var> に、<a href="#label-116">テーブルファイル</a> を指定します。</p>
<ul>
<li>t.tbl … T-Code</li>
<li>tut.tbl … TUT-Code</li>
<li>g.tbl … G-Code</li>
</ul>
</dd>
</dl>
<h4><a name="label-66" id="label-66">補助入力</a></h4><!-- RDLabel: "補助入力" -->
<p>補助入力関連のオプションです。</p>
<dl>
<dt><a name="label-67" id="label-67"><code>bushu=<var>file</var></code></a></dt><!-- RDLabel: "bushu=file" -->
<dd>
<p>[kanchoku.ini のデフォルト: kwbushu.rev; 省略時: (なし)]</p>
<p><var>file</var> に、部首合成変換の辞書ファイルを指定します。
指定しない場合は、部首合成変換を使用しない設定になります。</p>
</dd>
<dt><a name="label-68" id="label-68"><code>bushuAlgo=[OKA | YAMANOBE]</code></a></dt><!-- RDLabel: "bushuAlgo=[OKA | YAMANOBE]" -->
<dd>
<p>[kanchoku.ini のデフォルト: YAMANOBE; 省略時: OKA]</p>
<p><span class="sup">[<a href="#label-156">ver1.27f</a>]</span>
部首合成変換のアルゴリズムを指定します。</p>
<ul>
<li><code>bushuAlgo=OKA</code> 
    … 岡さんによるアルゴリズムを使用します。</li>
<li><code>bushuAlgo=YAMANOBE</code> 
    … 山辺さんによるアルゴリズム [tcode-ml:2652] を使用します。</li>
</ul>
<p>岡さんのアルゴリズムは、漢直Win の従来のアルゴリズムです。
山辺さんのアルゴリズムは、文字をより細かく分解して合成を行うもので、
たとえば、「準 + シ」は「汁」ではなく「隼」となります。
岡さんのアルゴリズムは、
tc.el や 
<a href="http://openlab.jp/tcode/soft.html"">T-Code for Macintosh</a> などに近く、
山辺さんのアルゴリズムは、<a href="#label-182">tc2</a> 
(特にバージョン 2.2 以降?) に近いと思われます。</p>
<p>指定しない場合は、岡さんによるアルゴリズムを用います。</p>
</dd>
<dt><a name="label-69" id="label-69"><code>mazegaki=<var>file</var></code></a></dt><!-- RDLabel: "mazegaki=file" -->
<dd>
<p>[kanchoku.ini のデフォルト: kwmaze.dic; 省略時: (なし)]</p>
<p><var>file</var> に、交ぜ書き変換の辞書ファイルを指定します。
指定しない場合は、交ぜ書き変換を使用しない設定になります。</p>
</dd>
<dt><a name="label-70" id="label-70"><code>conjugationalMaze=<var>n</var></code></a></dt><!-- RDLabel: "conjugationalMaze=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 2; 省略時: 1]</p>
<p>活用語を交ぜ書き変換する際の、読みの入力のしかたを指定します。
たとえば、
<a href="#label-30">交ぜ書き変換辞書</a>に <code>はな― /話/</code> というエントリがあるとして、
「話」と変換しようとしたとき、</p>
<ul>
<li><code>conjugationalMaze=0</code> 
    … 「はな―」(辞書に書いてあるそのままの形) でのみ、変換可能。</li>
<li><code>conjugationalMaze=1</code> 
    … 「はな―」、「はな」(語幹) でのみ、変換可能</li>
<li><code>conjugationalMaze=2</code> 
    … 「はなす」「はなさない」「はなします」などの活用形で変換可能<span class="sup">[<a href="#label-156">ver1.27f</a>]</span></li>
</ul>
<p>となります。</p>
</dd>
<dt><a name="label-71" id="label-71"><code>gg=<var>file</var></code></a></dt><!-- RDLabel: "gg=file" -->
<dd>
<p>[kanchoku.ini のデフォルト: (なし); 省略時: (なし)]</p>
<p><span class="sup">[<a href="#label-156">ver1.27a</a>]</span>
<var>file</var> に <a href="#label-34">熟語ガイド</a> の辞書ファイルを指定します。
指定しない場合は、熟語ガイドを使用しない設定になります。</p>
</dd>
<dt><a name="label-72" id="label-72"><code>defg=<var>string</var></code></a></dt><!-- RDLabel: "defg=string" -->
<dd>
<p>[kanchoku.ini のデフォルト: (なし); 省略時: (なし)]</p>
<p><span class="sup">[<a href="#label-156">ver1.27e</a>]</span>
<a href="#label-34">熟語ガイド</a> 使用時に、デフォルトの状態 (ガイドすべき文字がない場合)
で表示する文字を並べて指定します。</p>
</dd>
<dt><a name="label-73" id="label-73"><code>prefixautoassign=<var>string</var></code></a></dt><!-- RDLabel: "prefixautoassign=string" -->
<dd>
<p>[kanchoku.ini のデフォルト: (なし); 省略時: (なし)]</p>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>
<a href="#label-34">熟語ガイド</a> 使用時に、外字に一時的にストロークを割り振る機能で用いる
ストロークを矢印定義形式で指定します。</p>
</dd>
<dt><a name="label-74" id="label-74"><code>maze2gg=<var>n</var></code></a></dt><!-- RDLabel: "maze2gg=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>
「漢直Win」起動時に <a href="#label-29">強制練習モード</a> が有効かどうかを指定します。</p>
</dd>
<dt><a name="label-75" id="label-75"><code>record=<var>file</var></code></a></dt><!-- RDLabel: "record=file" -->
<dt><a name="label-76" id="label-76"><code>stat=<var>file</var></code></a></dt><!-- RDLabel: "stat=file" -->
<dd>
<p>[kanchoku.ini のデフォルト: kwrecord.txt, kwstat.txt; 省略時: (なし)]</p>
<p><span class="sup">[<a href="#label-156">ver1.27f</a>]</span>
<a href="#label-54">入力の統計</a>を記録するファイル名を指定します。</p>
</dd>
</dl>
<h4><a name="label-77" id="label-77">文字入力</a></h4><!-- RDLabel: "文字入力" -->
<p>文字入力に関するオプションです。</p>
<dl>
<dt><a name="label-78" id="label-78"><code>shiftKana=<var>n</var></code></a></dt><!-- RDLabel: "shiftKana=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p><var>n</var> に 1 を指定すると、シフト打鍵で、
ひらがなをかたかなに変換して入力します。
<del>ただし、
本来シフトを用いて入力する文字 (大文字や記号など) は入力できなくなります。
</del>
なお、
シフト打鍵は、かな文字の入力に使うキーだけを「漢直Win」側で取り、
それ以外のキーのシフト打鍵は、
通常の打鍵として扱われます<span class="sup">[<a href="#label-156">ver1.27a</a>]</span>。</p>
</dd>
<dt><a name="label-79" id="label-79"><code>enableHankakuKana=<var>n</var></code></a></dt><!-- RDLabel: "enableHankakuKana=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略値: 0]</p>
<p><span class="sup">[<a href="#label-156">ver1.27f</a>]</span>
<var>n</var> に 1 を指定すると、<a href="#label-43">全角モード</a> 時に、
かたかなを半角かなに変換します。</p>
</dd>
<dt><a name="label-80" id="label-80"><code>fallbackOnUnshift=<var>n</var></code></a></dt><!-- RDLabel: "fallbackOnUnshift=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: (省略値); 省略値: <var>shiftKana</var>]</p>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>
<var>n</var> に 1 を指定すると、シフト打鍵の定義がない場合に
シフトなし打鍵の定義で代用します。</p>
<p>部分的にシフト打鍵を定義したテーブルファイルを使用する場合や、
lockStrokeByShiftを用いる場合に指定して下さい。</p>
</dd>
<dt><a name="label-81" id="label-81"><code>lockStrokeByShift=<var>n</var></code></a></dt><!-- RDLabel: "lockStrokeByShift=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略値: 0]</p>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>
打鍵をシフトと組み合わせることでストロークロック機能が働きます。なお、すべての文字キー
（キーボードファイルにあるキー）のシフト打鍵を「漢直Win」側で取ってしまうため、
本来シフトを用いて入力する文字 (大文字や記号など) は F_VERB_FIRST を使う等しないと
入力できなくなります。</p>
<ul>
<li>1 … シフトなし打鍵のストロークがシフト打鍵でロックされ、シフト打鍵が続く間ロックされ、
    シフトなし打鍵が来るとロック解除＆その打鍵が第一打となります。
    ただしロック解除状態で第一打をシフト打鍵してもロックされず、続けてシフト打鍵すると
    第一打がロック対象となります。</li>
</ul>
</dd>
</dl>
<h4><a name="label-82" id="label-82">送出メッセージ</a></h4><!-- RDLabel: "送出メッセージ" -->
<p>送出メッセージに関するオプションです。</p>
<dl>
<dt><a name="label-83" id="label-83"><code>outputMethod=<var>n</var></code></a></dt><!-- RDLabel: "outputMethod=n" -->
<dt><a name="label-84" id="label-84"><code>useWMIMECHAR=<var>n</var></code></a></dt><!-- RDLabel: "useWMIMECHAR=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p>「漢直Win」がアプリケーションに文字を送出するときに用いる
送出メッセージを指定します。指定できる値は、</p>
<ul>
<li>0 (WM_CHAR)</li>
<li>1 (WM_IME_CHAR)</li>
<li>2 (WM_KANCHOKU_CHAR; フックと ImmSetCompositionString を組み合わせて
    入力するための独自のメッセージ
    <span class="sup">[<a href="#label-156">ver1.27f</a>]</span>)</li>
<li>3 (WM_UNICHAR
    <span class="sup">[<a href="#label-156">ver1.28</a>]</span>)</li>
</ul>
<p>です。</p>
<p>WindowsNT/2000/XP では 0 を、
Windows95/98/Me では 1 を指定しておいた方がいいようです。</p>
<p>特定のアプリケーションで「漢直Win」が使えない場合は、
後述の <a href="#label-89">ウィンドウクラスごとに送出メッセージを指定</a> の方法を
試してみてください<span class="sup">[<a href="#label-156">ver1.27f</a>]</span>。</p>
</dd>
<dt><a name="label-85" id="label-85"><code>enableWMKANCHOKUCHAR=<var>n</var></code></a></dt><!-- RDLabel: "enableWMKANCHOKUCHAR=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 1; 省略時: 0]</p>
<p><span class="sup">[<a href="#label-156">ver1.27f</a>]</span>
<code>outputMethod=2</code> を使用する場合は、<var>n</var> に 1 を指定しておきます。</p>
</dd>
<dt><a name="label-86" id="label-86"><code>outputSleep=<var>n</var></code></a></dt><!-- RDLabel: "outputSleep=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 2; 省略時: 0]</p>
<p><span class="sup">[<a href="#label-156">ver1.27a,f,1.28</a>]</span>
キー送出時に Sleep() する待ち時間 (単位はミリ秒) を指定します。
デフォルトは 2 ですが、
次のような場合には、適当に値を増やして指定してみてください。</p>
<ul>
<li><a href="#label-46">後置型の変換</a> で、
    変換した文字がうまく置き換えられない場合</li>
<li>入力の取りこぼしがある場合</li>
<li><kbd>BackSpace</kbd> や <kbd>Enter</kbd> が重複して入力されてしまう場合</li>
</ul>
<p>ただし、<code>useCtrlKey=2</code> の場合や XKeymacs 等を併用している場合には、
あまり値を増やすと <kbd>C-h</kbd> が <kbd>h</kbd> に化けるといった別の問題が生じます。</p>
</dd>
<dt><a name="label-87" id="label-87"><code>outputVKeyMethod=<var>n</var></code></a></dt><!-- RDLabel: "outputVKeyMethod=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>
「漢直Win」がアプリケーションに <kbd>BackSpace</kbd> や <kbd>Enter</kbd> 等の仮想キーを
送出するときに用いる送出メッセージを指定します。指定できる値は、</p>
<ul>
<li>0 (WM_KEYDOWN, WM_KEYUP を PostMessage)</li>
<li>1 (keybd_event)</li>
</ul>
<p>です。1 を指定することで、IME にキー操作が伝わるようになり、F_VERB_FIRST 等では
IME にローマ字入力ができるようになります。ただし現在の「漢直Win」は IME
の未確定文字列等へのケアがありませんので、使用の際はご注意ください。</p>
</dd>
<dt><a name="label-88" id="label-88"><code>outputAlphabetAsVKey=<var>n</var></code></a></dt><!-- RDLabel: "outputAlphabetAsVKey=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p><span class="sup">[<a href="#label-156">ver1.28a</a>]</span>
<var>n</var> に 1 を指定すると、テーブルファイルの文字列定義中の英小文字が
仮想キーとして送出されるようになります。<code>outputVKeyMethod=1</code> と併用して、
「漢直Win」をかな配列カスタマイズソフトとして使えるかもしれません。</p>
</dd>
</dl>
<h4><a name="label-89" id="label-89">ウィンドウクラスごとに送出メッセージを指定</a></h4><!-- RDLabel: "ウィンドウクラスごとに送出メッセージを指定" -->
<p><span class="sup">[<a href="#label-156">ver1.27f</a>]</span> 
送出メッセージ <code>outputMethod</code> は、
アプリケーションごとに (正確には、ウィンドウクラスごとに) 
指定することができます。</p>
<p>指定したいアプリケーションごとに、次のような記述を適宜追加してください。</p>
<pre>[&lt;識別子&gt;]
className=&lt;ウィンドウクラス名&gt;
outputMethod=&lt;送出メッセージ&gt;</pre>
<p><code>&lt;識別子&gt;</code> は、何でもよいのですが、
対象アプリケーションの名前を英字で書くのがよいでしょう。
他のものとぶつからないように適当に命名します。</p>
<p><code>&lt;ウィンドウクラス名&gt;</code> は、設定を行いたいウィンドウクラス名を指定します。
ウィンドウクラス名は、付属のツール wininfo.exe で調べることができます。
wininfo.exe を起動し (「漢直Win」は終了しておきます)、
調べたいウィンドウをアクティブにして、<kbd>Ctrl</kbd>+<kbd>\</kbd> キーを押すと、
入力フォーカスを持つウィンドウのクラス名が取得されるので、
それを書いておきます。</p>
<p><code>&lt;送出メッセージ&gt;</code> には、0, 1, 2 のいずれかを指定します。
前述の全般的な <a href="#label-82">送出メッセージ</a> で
<code>outputMethod=0</code> を指定した場合は、
ここでは<code>outputMethod=1</code> を、
逆に全般的な指定が 1 だったときは、ここでは 0 を指定してみてください。</p>
<p>それでだめなら、<code>outputMethod=2</code> も試してみてください。
<code>outputMethod=2</code> でも入力できない場合も、
「詳細なテキストサービスをオフにする」にチェックを入れると、
入力できるようになることがあります
(コントロールパネルの
「地域と言語のオプション」→「言語」タブ→「詳細」→「詳細設定」タブ)。
また、IME との相性もあるようです。</p>
<p>付属の kanchoku.ini に、いくつか設定例がありますので、参考にしてみてください。</p>
<h4><a name="label-90" id="label-90">表示</a></h4><!-- RDLabel: "表示" -->
<p>表示に関するオプションです。</p>
<dl>
<dt><a name="label-91" id="label-91"><code>xLoc=<var>n</var></code></a></dt><!-- RDLabel: "xLoc=n" -->
<dt><a name="label-92" id="label-92"><code>yLoc=<var>n</var></code></a></dt><!-- RDLabel: "yLoc=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: -1, -1; 省略時: -1, -1]</p>
<p>起動時の「漢直Win」のウィンドウの初期位置の x 座標と y 座標を、
それぞれピクセル単位で指定します。
-1 とすると、特に指定しない設定になります。</p>
</dd>
<dt><a name="label-93" id="label-93"><code>offHide=<var>n</var></code></a></dt><!-- RDLabel: "offHide=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p><var>n</var> に 1 を指定すると、OFF 時に「漢直Win」のウィンドウを非表示にします。</p>
<p>また 2 を指定すると、ON 時にもウィンドウを非表示にします。
この場合は、補助変換・候補選択・文字ヘルプ・ヒストリ入力・強制練習<span class="sup">[<a href="#label-156">ver1.28</a>]</span>時のみ、
ウィンドウを表示します。</p>
</dd>
<dt><a name="label-94" id="label-94"><code>followCaret=<var>n</var></code></a></dt><!-- RDLabel: "followCaret=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p><var>n</var> に 1 を指定すると、
「漢直Win」のウィンドウがキャレット (カーソル) に
追従して動くようになります。
ただし、対象ソフトによっては動作しないことがあります。</p>
</dd>
<dt><a name="label-95" id="label-95"><code>displayHelpDelay=<var>n</var></code></a></dt><!-- RDLabel: "displayHelpDelay=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>
第 1 打鍵が押されてから仮想鍵盤にキー配置が表示されるまでの待ち時間を <var>n</var> に ms 単位で指定します。
<code>offHide=2</code> の場合は <var>n</var> に 0 を指定すると無限大の意味になります。</p>
<ul>
<li>ver1.28 では内部タイマーを 100ms 単位としているため、下二桁は無視 (切り上げ) されます。</li>
</ul>
</dd>
</dl>
<h4><a name="label-96" id="label-96">その他</a></h4><!-- RDLabel: "その他" -->
<p>以下は、パッチ作成者の好みで加えられたオプションです。
通常は指定する必要はないでしょう。</p>
<dl>
<dt><a name="label-97" id="label-97"><code>hardBS=<var>n</var></code></a></dt><!-- RDLabel: "hardBS=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p>第 2 打鍵として押された <kbd>BackSpace</kbd> キーは、通常、
第 1 打鍵の取り消しですが、
<var>n</var> に 1 を指定すると、「第 1 打鍵の取り消し + 文字削除」になります。</p>
</dd>
<dt><a name="label-98" id="label-98"><code>weakBS=<var>n</var></code></a></dt><!-- RDLabel: "weakBS=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>
TUT-Code 等の 3 打鍵以上を用いる入力方式において、
第 3 打鍵等として押された <kbd>BackSpace</kbd> キーは、通常、
第 1 打鍵以降の取り消しですが、
<var>n</var> に 1 を指定すると、「直前の打鍵のみの取り消し」になります。</p>
</dd>
<dt><a name="label-99" id="label-99"><code>useCtrlKey=<var>n</var></code></a></dt><!-- RDLabel: "useCtrlKey=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p><var>n</var> に 1 を指定すると、
「<kbd>Ctrl</kbd>+ 英字」を機能キーと同様に扱います。具体的には、</p>
<ul>
<li><kbd>C-g</kbd> を <kbd>Esc</kbd> に</li>
<li><kbd>C-h</kbd> を <kbd>BackSpace</kbd> に</li>
<li><kbd>C-m</kbd> と <kbd>C-j</kbd> を <kbd>Enter</kbd> に</li>
<li><kbd>C-i</kbd> を <kbd>Tab</kbd> に</li>
</ul>
<p>それぞれ、同様に扱います。</p>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>
<var>n</var> に 1 を指定した場合は、例として <kbd>C-h</kbd> が入力された場合、
<kbd>BackSpace</kbd> と同じ動作をした後アプリに <kbd>C-h</kbd> を送出しますが、
<var>n</var> に 2 を指定すると代わりに <kbd>BackSpace</kbd> を送出するようになります。</p>
</dd>
<dt><a name="label-100" id="label-100"><code>clearBufOnMove=<var>n</var></code></a></dt><!-- RDLabel: "clearBufOnMove=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p>カーソル移動時に後置型変換用の内部バッファを消去するかどうかを指定します。</p>
<p>後置型で対象の長さを指定しないかたかな変換の際に、
カーソル移動前に入力した内容まで対象に含まれてしまう問題を
回避するためのオプションです。</p>
<p>カーソル移動の検出のため、次の10個のキーをフックします。
<kbd>←</kbd>、<kbd>→</kbd>、<kbd>↑</kbd>、<kbd>↓</kbd>、<kbd>PageUp</kbd>、<kbd>PageDown</kbd>、
<kbd>Home</kbd>、<kbd>End</kbd>、<kbd>Ctrl</kbd>+<kbd>←</kbd>、<kbd>Ctrl</kbd>+<kbd>→</kbd></p>
</dd>
<dt><a name="label-101" id="label-101"><code>win95=<var>n</var></code></a></dt><!-- RDLabel: "win95=n" -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p>Windows95 で仮想鍵盤のフォントが 1 ドットずれるようなので、その補正です。</p>
</dd>
</dl>
<dl>
<dt><a name="label-102" id="label-102"><code>offResetModes=<var>nnn...</var></code></a></dt><!-- RDLabel: "offResetModes=nnn..." -->
<dd>
<p>[kanchoku.ini のデフォルト: 0; 省略時: 0]</p>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>
<var>nnn...</var> に 1 を指定すると、漢直WinをOFFにしたときに、「かたかなモード」と
「全角モード」と「句読点」と「強制練習モード」と「ストロークロック」を
初期状態にリセットします。</p>
<p><var>nnn...</var> の各桁は左から順に上記のモードに対応しています。
110 と指定した場合は 11000 の省略形とみなされ、「かたかなモード」と「全角モード」
がリセットされます。上記の 1 という指定は 11111 の省略形です。</p>
</dd>
<dt><a name="label-103" id="label-103"><code>style_base=<var>00rrggbb...</var></code></a></dt><!-- RDLabel: "style_base=00rrggbb..." -->
<dt><a name="label-104" id="label-104"><code>style_info=<var>00rrggbb...</var></code></a></dt><!-- RDLabel: "style_info=00rrggbb..." -->
<dt><a name="label-105" id="label-105"><code>style_fontname=<var>string</var></code></a></dt><!-- RDLabel: "style_fontname=string" -->
<dt><a name="label-106" id="label-106"><code>style_fontsize=<var>n</var></code></a></dt><!-- RDLabel: "style_fontsize=n" -->
<dt><a name="label-107" id="label-107"><code>style_padding=<var>n</var></code></a></dt><!-- RDLabel: "style_padding=n" -->
<dd>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>
仮想鍵盤の配色・フォントの設定です。付属のツール kwstyle.exe を用いると、
実行中の漢直Winでも動的に設定を変更することができます。</p>
<p>漢直Winと同じディレクトリに置いた kwstyle.exe を起動し、設定を変更して
<kbd>OK</kbd> または <kbd>Apply</kbd> をクリックすると、kanchoku.ini が書き換えられ、
漢直Winが実行中の場合にはその設定が反映されます。</p>
</dd>
</dl>
<h3><a name="label-108" id="label-108">キーボードファイル</a></h3><!-- RDLabel: "キーボードファイル" -->
<p>キーボードファイル *.key は、キーボード上の実際のキーと、
「漢直Win」の内部で使用する <em>キー番号</em> の対応を記述したファイルです。</p>
<p>使用するキーボードに合わせたものを選び、初期設定ファイル kanchoku.ini の
<code>keyboard</code> オプションで指定します。
「漢直Win」のパッケージに含まれているキーボードファイルは、次のとおりです。</p>
<ul>
<li><a href="#label-113">106.key</a> … 日本語配列 (106 配列、109 配列)</li>
<li><a href="#label-114">101.key</a> … 英語配列 (101 配列、104 配列)</li>
<li><a href="#label-115">dvorak.key</a> … Dvorak 配列</li>
</ul>
<p>通常は、上記のいずれかから選ぶとよいでしょう。</p>
<p>特殊なキーボードを使用している方や、キーレイアウトを変更している方は、
以下の <a href="#label-109">キーボードファイルの書式</a> を参考に、
キーボードファイルを記述してお使いください。</p>
<h4><a name="label-109" id="label-109">キーボードファイルの書式</a></h4><!-- RDLabel: "キーボードファイルの書式" -->
<p>キーボードファイルには、
「漢直Win」で用いる 49 個のキーの <a href="#label-111">仮想キーコード</a> を、16 進表記で、
キー番号 (0 ～ 48) の順に記述します。
各仮想キーコードの後ろには、コンマ (<code>,</code>) を書きます。
仮想キーコードやコンマの間には、空白や改行を入れてもよいようです。
コメントを書くことはできません。</p>
<h4><a name="label-110" id="label-110">キー番号</a></h4><!-- RDLabel: "キー番号" -->
<p>キー番号は、「漢直Win」の内部で、各キーを識別するのに用いられる番号です。
T-Code で用いられる 40 個のキーについては、
キーボードの左上から順に 0 ～ 39 を、
またそれ以外のキーにも 40 ～ 48 の番号を割り当てています。</p>
<p>各キー番号のキーの配置を、
実際のキーボード上の配置 (図左)、および
「漢直Win」の仮想鍵盤上の配置 (図右) に示します。
なお、英語キーボードでは、48 番に相当するキーは存在せず、
利用できないようです。</p>
<table class="figure" summary="キー番号の対応の図示">
<caption>キー番号の対応――仮想鍵盤 (左) と実際のキーボード (右)</caption>
<tr>
<td>
<img src="img/tkeys_vkb.png" alt="仮想鍵盤" title="仮想鍵盤" />
</td>
<td>
<img src="img/tkeys_kb.png" alt="キーボード" title="キーボード" />
</td>
</tr>
</table>

<h4><a name="label-111" id="label-111">仮想キーコード</a></h4><!-- RDLabel: "仮想キーコード" -->
<p>仮想キーコードは、Windows の内部で、各キーを識別するのに用いられる数値です。</p>
<p>主なキーの仮想キーコードを、下の表に示します。</p>
<p>■<kbd>カナ</kbd>、<kbd>漢字</kbd>、<kbd>Win</kbd> など、一部のキーは
「漢直Win」では利用できないようです。□</p>
<div class="table">
<table class="vkeytbl0" rules="cols" summary="仮想キーコードと実際のキーの対応">
<caption>仮想キーコード (vkey) と実際のキー (key) の対応 (かっこ内は英語配列)</caption>
<tr valign="top">
<td>
<table class="vkeytbl" summary="仮想キーコードと実際のキーの対応">
<colgroup><col align="right" /><col align="left" /></colgroup>
<thead><tr><th>vkey</th><th>key</th></tr></thead>
<tbody>
<tr><td><code>30</code></td><td><kbd>0</kbd></td></tr>
<tr><td><code>31</code></td><td><kbd>1</kbd></td></tr>
<tr><td><code>32</code></td><td><kbd>2</kbd></td></tr>
<tr><td><code>33</code></td><td><kbd>3</kbd></td></tr>
<tr><td><code>34</code></td><td><kbd>4</kbd></td></tr>
<tr><td><code>35</code></td><td><kbd>5</kbd></td></tr>
<tr><td><code>36</code></td><td><kbd>6</kbd></td></tr>
<tr><td><code>37</code></td><td><kbd>7</kbd></td></tr>
<tr><td><code>38</code></td><td><kbd>8</kbd></td></tr>
<tr><td><code>39</code></td><td><kbd>9</kbd></td></tr>
</tbody>
</table>
</td>
<td>
<table class="vkeytbl" summary="仮想キーコードと実際のキーの対応">
<colgroup><col align="right" /><col align="left" /></colgroup>
<thead><tr><th>vkey</th><th>key</th></tr></thead>
<tbody>
<tr><td><code>41</code></td><td><kbd>A</kbd></td></tr>
<tr><td><code>42</code></td><td><kbd>B</kbd></td></tr>
<tr><td><code>43</code></td><td><kbd>C</kbd></td></tr>
<tr><td><code>44</code></td><td><kbd>D</kbd></td></tr>
<tr><td><code>45</code></td><td><kbd>E</kbd></td></tr>
<tr><td><code>46</code></td><td><kbd>F</kbd></td></tr>
<tr><td><code>47</code></td><td><kbd>G</kbd></td></tr>
<tr><td><code>48</code></td><td><kbd>H</kbd></td></tr>
<tr><td><code>49</code></td><td><kbd>I</kbd></td></tr>
<tr><td><code>4a</code></td><td><kbd>J</kbd></td></tr>
<tr><td><code>4b</code></td><td><kbd>K</kbd></td></tr>
<tr><td><code>4c</code></td><td><kbd>L</kbd></td></tr>
<tr><td><code>4d</code></td><td><kbd>M</kbd></td></tr>
</tbody>
</table>
</td>
<td>
<table class="vkeytbl" summary="仮想キーコードと実際のキーの対応">
<colgroup><col align="right" /><col align="left" /></colgroup>
<thead><tr><th>vkey</th><th>key</th></tr></thead>
<tbody>
<tr><td><code>4e</code></td><td><kbd>N</kbd></td></tr>
<tr><td><code>4f</code></td><td><kbd>O</kbd></td></tr>
<tr><td><code>50</code></td><td><kbd>P</kbd></td></tr>
<tr><td><code>51</code></td><td><kbd>Q</kbd></td></tr>
<tr><td><code>52</code></td><td><kbd>R</kbd></td></tr>
<tr><td><code>53</code></td><td><kbd>S</kbd></td></tr>
<tr><td><code>54</code></td><td><kbd>T</kbd></td></tr>
<tr><td><code>55</code></td><td><kbd>U</kbd></td></tr>
<tr><td><code>56</code></td><td><kbd>V</kbd></td></tr>
<tr><td><code>57</code></td><td><kbd>W</kbd></td></tr>
<tr><td><code>58</code></td><td><kbd>X</kbd></td></tr>
<tr><td><code>59</code></td><td><kbd>Y</kbd></td></tr>
<tr><td><code>5a</code></td><td><kbd>Z</kbd></td></tr>
</tbody>
</table>
</td>
<td>
<table class="vkeytbl" summary="仮想キーコードと実際のキーの対応">
<colgroup><col align="right" /><col align="left" /></colgroup>
<thead><tr><th>vkey</th><th>key</th></tr></thead>
<tbody>
<tr><td><code>ba</code></td><td><kbd>:*</kbd> (<kbd>;:</kbd>)</td></tr>
<tr><td><code>bb</code></td><td><kbd>;+</kbd> (<kbd>=+</kbd>)</td></tr>
<tr><td><code>bc</code></td><td><kbd>,&lt;</kbd></td></tr>
<tr><td><code>bd</code></td><td><kbd>-=</kbd> (<kbd>-_</kbd>)</td></tr>
<tr><td><code>be</code></td><td><kbd>.&gt;</kbd></td></tr>
<tr><td><code>bf</code></td><td><kbd>/?</kbd></td></tr>
<tr><td><code>c0</code></td><td><kbd>@`</kbd> (<kbd>`~</kbd>)</td></tr>
<tr><td><code>db</code></td><td><kbd>[{</kbd></td></tr>
<tr><td><code>dc</code></td><td><kbd>\|</kbd></td></tr>
<tr><td><code>dd</code></td><td><kbd>]}</kbd></td></tr>
<tr><td><code>de</code></td><td><kbd>^~</kbd> (<kbd>'&quot;</kbd>)</td></tr>
<tr><td><code>e2</code></td><td><kbd>\_</kbd> (なし)</td></tr>
</tbody>
</table>
</td>
<td>
<table class="vkeytbl" summary="仮想キーコードと実際のキーの対応">
<colgroup><col align="right" /><col align="left" /></colgroup>
<thead><tr><th>vkey</th><th>key</th></tr></thead>
<tbody>
<tr><td><code>08</code></td><td><kbd>BS</kbd></td></tr>
<tr><td><code>09</code></td><td><kbd>TAB</kbd></td></tr>
<tr><td><code>0d</code></td><td><kbd>Enter</kbd></td></tr>
<tr><td><code>15</code></td><td><kbd>カナ</kbd></td></tr>
<tr><td><code>19</code></td><td><kbd>漢字</kbd></td></tr>
<tr><td><code>1b</code></td><td><kbd>ESC</kbd></td></tr>
<tr><td><code>1c</code></td><td><kbd>変換</kbd></td></tr>
<tr><td><code>1d</code></td><td><kbd>無変換</kbd></td></tr>
<tr><td><code>20</code></td><td><kbd>SPC</kbd></td></tr>
</tbody>
</table>
</td>
<td>
<table class="vkeytbl" summary="仮想キーコードと実際のキーの対応">
<colgroup><col align="right" /><col align="left" /></colgroup>
<thead><tr><th>vkey</th><th>key</th></tr></thead>
<tbody>
<tr><td><code>21</code></td><td><kbd>PageUp</kbd></td></tr>
<tr><td><code>22</code></td><td><kbd>PageDown</kbd></td></tr>
<tr><td><code>23</code></td><td><kbd>End</kbd></td></tr>
<tr><td><code>24</code></td><td><kbd>Home</kbd></td></tr>
<tr><td><code>25</code></td><td><kbd>←</kbd></td></tr>
<tr><td><code>26</code></td><td><kbd>↑</kbd></td></tr>
<tr><td><code>27</code></td><td><kbd>→</kbd></td></tr>
<tr><td><code>28</code></td><td><kbd>↓</kbd></td></tr>
<tr><td><code>2d</code></td><td><kbd>Insert</kbd></td></tr>
<tr><td><code>2e</code></td><td><kbd>Delete</kbd></td></tr>
<tr><td><code>5b</code></td><td>左<kbd>Win</kbd></td></tr>
<tr><td><code>5c</code></td><td>右<kbd>Win</kbd></td></tr>
<tr><td><code>5d</code></td><td><kbd>Appl</kbd></td></tr>
</tbody>
</table>
</td>
</tr>
</table>
</div>

<h4><a name="label-112" id="label-112">付属のキーボードファイル</a></h4><!-- RDLabel: "付属のキーボードファイル" -->
<h5><a name="label-113" id="label-113">106.key</a></h5><!-- RDLabel: "106.key" -->
<pre>31, 32, 33, 34, 35, 36, 37, 38, 39, 30,
51, 57, 45, 52, 54, 59, 55, 49, 4f, 50,
41, 53, 44, 46, 47, 48, 4a, 4b, 4c, bb,
5a, 58, 43, 56, 42, 4e, 4d, bc, be, bf,
20, bd, de, dc, c0, db, ba, dd, e2,</pre>
<table class="figure" summary="106.key の対応の図示">
<tr>
<td>
<img src="img/keys_106_vkb.png" alt="仮想鍵盤" title="仮想鍵盤" />
</td>
<td>
<img src="img/keys_106_kb.png" alt="キーボード" title="キーボード" />
</td>
</tr>
</table>

<h5><a name="label-114" id="label-114">101.key</a></h5><!-- RDLabel: "101.key" -->
<pre>31, 32, 33, 34, 35, 36, 37, 38, 39, 30,
51, 57, 45, 52, 54, 59, 55, 49, 4f, 50,
41, 53, 44, 46, 47, 48, 4a, 4b, 4c, ba,
5a, 58, 43, 56, 42, 4e, 4d, bc, be, bf,
20, bd, bb, dc, db, dd, de, c0, 00,</pre>
<table class="figure" summary="101.key の対応の図示">
<tr>
<td>
<img src="img/keys_101_vkb.png" alt="仮想鍵盤" title="仮想鍵盤" />
</td>
<td>
<img src="img/keys_101_kb.png" alt="キーボード" title="キーボード" />
</td>
</tr>
</table>

<h5><a name="label-115" id="label-115">dvorak.key</a></h5><!-- RDLabel: "dvorak.key" -->
<pre>31, 32, 33, 34, 35, 36, 37, 38, 39, 30,
de, bc, be, 50, 59, 46, 47, 43, 52, 4c,
41, 4f, 45, 55, 49, 44, 48, 54, 4e, 53,
ba, 51, 4a, 4b, 58, 42, 4d, 57, 56, 5a,
20, db, dd, dc, bf, bb, bd, c0, e2,</pre>
<table class="figure" summary="dvorak.key の対応の図示">
<tr>
<td>
<img src="img/keys_dvorake_vkb.png" alt="仮想鍵盤" title="仮想鍵盤" />
</td>
<td>
<img src="img/keys_dvorake_kb.png" alt="キーボード" title="キーボード" />
</td>
</tr>
</table>

<h3><a name="label-116" id="label-116">テーブルファイル</a></h3><!-- RDLabel: "テーブルファイル" -->
<p>テーブルファイルは、入力方式 (T-Code や TUT-Code など) の定義
を記述したファイルです。</p>
<p>使用する入力方式に合わせたものを選び、初期設定ファイル kanchoku.ini の
<code>tableFile</code> オプションで指定します。
「漢直Win」のパッケージに含まれているテーブルファイルは、次のとおりです。</p>
<ul>
<li>t.tbl … T-Code</li>
<li>tut.tbl … TUT-Code</li>
<li>g.tbl … G-Code</li>
</ul>
<p>テーブルファイルをカスタマイズしたい方や、独自の入力方式をお使いの方は、
以下の <a href="#label-117">テーブルファイルの書式</a> を参考に、
テーブルファイルを記述してお使いください。</p>
<h4><a name="label-117" id="label-117">テーブルファイルの書式</a></h4><!-- RDLabel: "テーブルファイルの書式" -->
<p>以下に、テーブルファイルの書式 (推測) を説明します。</p>
<p>テーブルファイルは、大まかに以下のような形をしています。</p>
<pre>{
   &lt;0&gt; ,  &lt;1&gt; ,  &lt;2&gt; ,  &lt;3&gt; ,  &lt;4&gt; ,  &lt;5&gt; ,  &lt;6&gt; ,  &lt;7&gt; ,  &lt;8&gt; ,  &lt;9&gt; ,
  &lt;10&gt; , &lt;11&gt; , &lt;12&gt; , &lt;13&gt; , &lt;14&gt; , &lt;15&gt; , &lt;16&gt; , &lt;17&gt; , &lt;18&gt; , &lt;19&gt; ,
  &lt;20&gt; , &lt;21&gt; , &lt;22&gt; , &lt;23&gt; , &lt;24&gt; , &lt;25&gt; , &lt;26&gt; , &lt;27&gt; , &lt;28&gt; , &lt;29&gt; ,
  &lt;30&gt; , &lt;31&gt; , &lt;32&gt; , &lt;33&gt; , &lt;34&gt; , &lt;35&gt; , &lt;36&gt; , &lt;37&gt; , &lt;38&gt; , &lt;39&gt; ,
  &lt;40&gt; , &lt;41&gt; , &lt;42&gt; , &lt;43&gt; , &lt;44&gt; , &lt;45&gt; , &lt;46&gt; , &lt;47&gt; , &lt;48&gt;
}</pre>
<p>すなわち、<code>&lt;0&gt;</code> ～ <code>&lt;48&gt;</code> の 49 個の「なんらかの要素」を、
コンマ (<code>,</code>) で区切って並べ、
その全体を中かっこ (<code>{</code> と <code>}</code>) で囲ったものです。
これを、以後、ブロックと呼びます。</p>
<ul>
<li>「なんらかの要素」は、一般に、別のブロックまたは特殊定義です。</li>
<li>最も外側のブロックのことを、<em>モードブロック</em> と呼びます。</li>
<li><span class="sup">[<a href="#label-156">ver1.28</a>]</span><em>モードブロック</em> は、複数回繰り返すことができ、
  拡張部分や機能キー定義を分離して記述することができます。</li>
<li>各要素とコンマ、中かっこの間には、空白や改行を入れてもよいようです。</li>
<li><code>;</code> または <code>#</code> から行末までは、コメントとして読みとばされます。</li>
</ul>
<p>ブロックの中の各要素 <code>&lt;n&gt;</code> が、
それぞれの <a href="#label-110">キー番号</a> のキーに対応しており、
この部分に、各キーの挙動を記述します。</p>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>
シフト打鍵を用いる入力方式の場合、各要素は
実際には (～<code>,</code><code>&lt;n&gt; / &lt;Sn&gt;</code><code>,</code>～) という形式で
2個の要素を指定するようになっており、<code>&lt;n&gt;</code> で通常打鍵時の、<code>&lt;Sn&gt;</code> で
シフト打鍵時の挙動を記述します。<code>/</code> 以降を省略することができ、省略した
形式のものが従来のテーブルファイルと同じになります。
なお、シフト打鍵を使わないキーのシフト打鍵は漢直Winの制御下にないため、
従来のテーブルファイルを用いれば自動的に従来と同じ動作になります。</p>
<p>各キーの挙動として指定する要素は、次のいずれかです。</p>
<dl>
<dt><a name="label-118" id="label-118">空定義</a></dt><!-- RDLabel: "空定義" -->
<dd>
<p>何も書かなかった場合は、空定義となります。</p>
<p>この場合、該当キーを押しても何も起こらず、何も入力されません
(厳密には、内部状態がリセットされ、第 1 打鍵待ちの状態になります)。
文字が定義されていないキーには、空定義を指定します。</p>
<p>なお、空定義を指定する場合でも、区切りのコンマは省略できません。</p>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>モードブロックを複数回繰り返す場合、
そのブロックで定義または上書きしたい部分以外は空定義にしてください。</p>
</dd>
<dt><a name="label-119" id="label-119">ブロック</a></dt><!-- RDLabel: "ブロック" -->
<dd>
<p>49 個の要素をコンマ (<code>,</code>) で区切って並べ、
全体を中かっこ (<code>{</code> と <code>}</code>) で囲ったものです。</p>
<p>次の打鍵に続くようなキーにはブロックを指定し、
そのブロックの内側の各要素に、次の各打鍵の挙動を記述します。</p>
</dd>
<dt><a name="label-120" id="label-120">文字列</a></dt><!-- RDLabel: "文字列" -->
<dd>
<p><code>"の"</code> あるいは <code>"漢"</code> などのように、
ダブルクォート (<code>"</code>) で囲った
文字 (の有限個の並び) です。
この場合、該当するキーを打鍵すると、指定した文字が入力されます。</p>
<p>なお、文字列定義中の「<code>\</code>」は、続く 1 文字をエスケープします。
文字「"」を定義するには「<code>"\""</code>」、
「\」を定義するには「<code>"\\"</code>」と指定してください。</p>
<p>現在の仕様では、
「<code>\</code>」は単なるエスケープであり、「<code>\n</code>」や「<code>\t</code>」は
改行やタブにはなりません。</p>
</dd>
<dt><a name="label-121" id="label-121">特殊定義</a></dt><!-- RDLabel: "特殊定義" -->
<dd>
<p>部首合成変換や交ぜ書き変換など、
各種の機能に対応する定義です。
<code>@b</code> や <code>@m</code> などのように、<code>@&lt;文字&gt;</code> という形式をしています。</p>
<p>後述の <a href="#label-123">特殊定義の一覧</a> を参照してください。</p>
</dd>
<dt><a name="label-122" id="label-122">矢印定義</a></dt><!-- RDLabel: "矢印定義" -->
<dd>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span> <code>"-26&gt;"</code> や <code>"-S12&gt;"</code> などのように、マイナス (<code>-</code>) と
不等号 (<code>&gt;</code>) でキー番号を囲ったものです。矢印定義の後ろに、キー番号で
指定した打鍵の挙動を指定します。モードブロックとしても利用可能です。</p>
<p>シフト打鍵は <code>"S12"</code> のように <code>"S"</code> をつけて指定します。</p>
</dd>
</dl>
<p>たとえば T-Code の場合では、
モードブロックの 0 ～ 39 番の要素 (第 1 打鍵に対応) にブロックを指定し、
その各ブロックの中の 0 ～ 39 番の要素 (第 2 打鍵に対応) に文字列を
指定することになります。
特に、
モードブロックの中の 26 番のブロックの中の 23 番の要素には
部首合成変換 <code>@b</code> を、
また 23 番のブロックの中の 26 番の要素には
交ぜ書き変換 <code>@m</code> を指定することに
なります。</p>
<p>TUT-Code も T-Code の場合と同様ですが、
3 ストロークや 4 ストロークの文字に対しては、
モードブロック内の該当する要素に、2 重あるいは 3 重の入れ子のブロックを
指定することになるでしょう。</p>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>
矢印定義を用いれば、ブロックが入れ子になること等を避けることができ、
読みやすく改造しやすいテーブルファイルを記述することが可能になります。</p>
<p>たとえば先ほどの T-Code の例は、矢印定義を用いれば、独立したモードブロックとして</p>
<pre>-23&gt;-26&gt;@m
-26&gt;-23&gt;@b</pre>
<p>の2行で記述できます。</p>
<h4><a name="label-123" id="label-123">特殊定義の一覧</a></h4><!-- RDLabel: "特殊定義の一覧" -->
<p>特殊定義に指定できるものを、以下に列挙します。
[ ] 内は仮想鍵盤での表示を、
( ) 内は「漢直Win」の内部での名前を表しています。</p>
<h5><a name="label-124" id="label-124">モード類の特殊定義</a></h5><!-- RDLabel: "モード類の特殊定義" -->
<dl>
<dt><a name="label-125" id="label-125"><code>@Z</code> [<kbd>全</kbd>] (<var>F_HANZEN</var>)</a></dt><!-- RDLabel: "@Z [全] (F_HANZEN)" -->
<dd>
<a href="#label-43">全角モード</a> の切り替えです。
全角モードでは、
テーブルで定義された文字のうち、
半角文字 (ASCII 文字) と対応する全角文字が相互変換されて入力されます。
<del>なお、半角かなには対応していません。</del>
<a href="#label-57">初期設定ファイル</a> で <code>enableHankakuKana=1</code> オプションを指定すると、
半角かなにも対応します。<span class="sup">[<a href="#label-156">ver1.27f</a>]</span>
</dd>
<dt><a name="label-126" id="label-126"><code>@K</code> [<kbd>ア</kbd>] (<var>F_HIRAKATA</var>)</a></dt><!-- RDLabel: "@K [ア] (F_HIRAKATA)" -->
<dd>
<a href="#label-39">かたかなモード</a> の切り替えです。
かたかなモードでは、
テーブルで定義された文字のうち、
ひらがなとかたかなが相互変換されて入力されます。
</dd>
<dt><a name="label-127" id="label-127"><code>@s</code> [<kbd>替</kbd>] (<var>F_SWITCH_MODE</var>)</a></dt><!-- RDLabel: "@s [替] (F_SWITCH_MODE)" -->
<dd>
<code>@K</code> と同じ意味になります。
</dd>
<dt><a name="label-128" id="label-128"><code>@p</code> [<kbd>句</kbd>] (<var>F_PUNCT</var>)</a></dt><!-- RDLabel: "@p [句] (F_PUNCT)" -->
<dd>
<a href="#label-44">句読点の切り替え</a> です。
テーブルで定義された文字のうち、「、。」と「，．」が
相互変換されて入力されます。
</dd>
<dt><a name="label-129" id="label-129"><code>@g</code> [<kbd>習</kbd>] (<var>F_MAZE2GG</var>)</a></dt><!-- RDLabel: "@g [習] (F_MAZE2GG)" -->
<dd>
<span class="sup">[<a href="#label-156">ver1.28</a>]</span> <a href="#label-29">強制練習モード</a> の切り替えです。
交ぜ書き変換において、候補の一覧から選択する標準モードとガイド表示に従って
直接入力する強制練習モードを切り替えます。
</dd>
<dt><a name="label-130" id="label-130"><code>@w</code> [<kbd>窓</kbd>] (<var>F_SHOWWIN</var>)</a></dt><!-- RDLabel: "@w [窓] (F_SHOWWIN)" -->
<dd>
<span class="sup">[<a href="#label-156">ver1.28</a>]</span> <code>offHide=1</code> と <code>offHide=2</code> の間でトグルします。
</dd>
</dl>
<h5><a name="label-131" id="label-131">前置型の変換の特殊定義</a></h5><!-- RDLabel: "前置型の変換の特殊定義" -->
<dl>
<dt><a name="label-132" id="label-132"><code>@b</code> [<kbd>◆</kbd>] (<var>F_BUSHU_PRE</var>)</a></dt><!-- RDLabel: "@b [◆] (F_BUSHU_PRE)" -->
<dd>
前置型の <a href="#label-22">部首合成変換</a> を開始します。
</dd>
<dt><a name="label-133" id="label-133"><code>@m</code> [<kbd>◇</kbd>] (<var>F_MAZE_PRE</var>)</a></dt><!-- RDLabel: "@m [◇] (F_MAZE_PRE)" -->
<dd>
前置型の <a href="#label-28">交ぜ書き変換</a> を開始します。
</dd>
<dt><a name="label-134" id="label-134"><code>@!</code> [<kbd>◎</kbd>] (<var>F_HIST</var>)</a></dt><!-- RDLabel: "@! [◎] (F_HIST)" -->
<dd>
<a href="#label-45">ヒストリ入力</a> モードに入ります。
</dd>
</dl>
<h5><a name="label-135" id="label-135">取消の特殊定義</a></h5><!-- RDLabel: "取消の特殊定義" -->
<dl>
<dt><a name="label-136" id="label-136"><code>@q</code> [<kbd>×</kbd>] (<var>F_QUIT</var>)</a></dt><!-- RDLabel: "@q [×] (F_QUIT)" -->
<dd>
部首合成変換モードや交ぜ書き変換モードを中断し、
通常の入力モードに戻ります
</dd>
</dl>
<h5><a name="label-137" id="label-137">後置型の変換の特殊定義</a></h5><!-- RDLabel: "後置型の変換の特殊定義" -->
<dl>
<dt><a name="label-138" id="label-138"><code>@B</code> [<kbd>部</kbd>] (<var>F_BUSHU_POST</var>)</a></dt><!-- RDLabel: "@B [部] (F_BUSHU_POST)" -->
<dd>
<a href="#label-47">後置型の部首合成変換</a> です。
</dd>
<dt><a name="label-139" id="label-139"><code>@1</code> ～ <code>@9</code> [<kbd>変</kbd>] (<var>F_MAZE_POST1</var> ～ <var>F_MAZE_POST9</var>)</a></dt><!-- RDLabel: "@1 ～ @9 [変] (F_MAZE_POST1 ～ F_MAZE_POST9)" -->
<dd>
それぞれ、読みの長さが 1 文字 ～ 9 文字の <a href="#label-48">後置型の交ぜ書き変換</a> です。
</dd>
<dt><a name="label-140" id="label-140"><code>@-</code> [<kbd>カ</kbd>] (<var>F_KATA_POST0</var>)</a></dt><!-- RDLabel: "@- [カ] (F_KATA_POST0)" -->
<dd>
連続するひらがなや「ー」を対象とする <a href="#label-49">後置型のかたかな変換</a> です。
</dd>
<dt><a name="label-141" id="label-141"><code>@Q</code> ～ <code>@Y</code> [<kbd>カ</kbd>] (<var>F_KATA_POST1</var> ～ <var>F_KATA_POST9</var>)</a></dt><!-- RDLabel: "@Q ～ @Y [カ] (F_KATA_POST1 ～ F_KATA_POST9)" -->
<dd>
それぞれ、対象の長さが 1 文字 ～ 9 文字の <a href="#label-49">後置型のかたかな変換</a> です。
</dd>
<dt><a name="label-142" id="label-142"><code>@)</code> <code>@(</code> <code>@'</code> <code>@&amp;</code> <code>@%</code> <code>@$</code> [<kbd>ヵ</kbd>] (<var>F_KATA_POSTH1</var> ～ <var>F_KATA_POSTH6</var>)</a></dt><!-- RDLabel: "@) @( @' @& @% @$ [ヵ] (F_KATA_POSTH1 ～ F_KATA_POSTH6)" -->
<dd>
連続するひらがなや「ー」を対象とする <a href="#label-49">後置型のかたかな変換</a> において、
変換から除外する文字の長さをそれぞれ、1 文字 ～ 6 文字と指定して変換します。
</dd>
<dt><a name="label-143" id="label-143"><code>@@</code> <code>@[</code> <code>@;</code> <code>@:</code> <code>@]</code> [<kbd>か</kbd>] (<var>F_KATA_POSTS1</var> ～ <var>F_KATA_POSTS5</var>)</a></dt><!-- RDLabel: "@@ @[ @; @: @] [か] (F_KATA_POSTS1 ～ F_KATA_POSTS5)" -->
<dd>
直前の <a href="#label-49">後置型のかたかな変換</a> で変換したかたかな文字列を、
それぞれ 1 文字 ～ 5 文字縮めます。
</dd>
<dt><a name="label-144" id="label-144"><code>@D</code> [<kbd>゛</kbd>] (<var>F_DAKUTEN</var>)</a></dt><!-- RDLabel: "@D [゛] (F_DAKUTEN)" -->
<dd>
後置型の濁点です。
</dd>
<dt><a name="label-145" id="label-145"><code>@P</code> [<kbd>゜</kbd>] (<var>F_HANDAKUTEN</var>)</a></dt><!-- RDLabel: "@P [゜] (F_HANDAKUTEN)" -->
<dd>
後置型の半濁点です。
</dd>
</dl>
<h5><a name="label-146" id="label-146">文字ヘルプの特殊定義</a></h5><!-- RDLabel: "文字ヘルプの特殊定義" -->
<dl>
<dt><a name="label-147" id="label-147"><code>@h</code> [<kbd>≪</kbd>] (<var>F_HELP_BACKW</var>)</a></dt><!-- RDLabel: "@h [≪] (F_HELP_BACKW)" -->
<dd>
直前の <a href="#label-33">文字ヘルプ</a> を再表示します。
続けて実行すると、ヘルプ履歴をさかのぼって表示します。
</dd>
<dt><a name="label-148" id="label-148"><code>@H</code> [<kbd>≫</kbd>] (<var>F_HELP_FORW</var>)</a></dt><!-- RDLabel: "@H [≫] (F_HELP_FORW)" -->
<dd>
直前の <a href="#label-33">文字ヘルプ</a> を再表示します。
続けて実行すると、<code>@h</code> の逆方向に表示します。
</dd>
</dl>
<h5><a name="label-149" id="label-149">キー入力の特殊定義</a></h5><!-- RDLabel: "キー入力の特殊定義" -->
<dl>
<dt><a name="label-150" id="label-150"><code>@v</code> [<kbd>・</kbd>] (<var>F_VERB_FIRST</var>)</a></dt><!-- RDLabel: "@v [・] (F_VERB_FIRST)" -->
<dd>
最初のストロークのキーを入力します。
T-Code の第 2 打鍵の <kbd>Space</kbd> に指定するとよいでしょう。
なお、第 1 打鍵として指定された場合は、その打鍵そのものを入力します。
</dd>
<dt><a name="label-151" id="label-151"><code>@^</code> [<kbd>・</kbd>] (<var>F_VERB_THIS</var>)</a></dt><!-- RDLabel: "@^ [・] (F_VERB_THIS)" -->
<dd>
<span class="sup">[<a href="#label-156">ver1.28</a>]</span> 今入力したストロークのキーを入力します。
</dd>
</dl>
<h4><a name="label-152" id="label-152">入力方式に固有の設定</a></h4><!-- RDLabel: "入力方式に固有の設定" -->
<p><span class="sup">[<a href="#label-156">ver1.27e</a>]</span>
「<code>#define <var>...</var></code>」の形式の行指定で、
入力方式に固有の設定を行うことができます。
現在、以下のオプションが設定可能です。</p>
<dl>
<dt><a name="label-153" id="label-153"><code>#define table-name "<var>name</var>"</code></a></dt><!-- RDLabel: "#define table-name "name"" -->
<dd>
入力方式の名前を、
<code>"T"</code>, <code>"TUT"</code>, <code>"G"</code>などのように指定します。
指定した名前は、「漢直Win」のタイトルバーに表示されます。
</dd>
<dt><a name="label-154" id="label-154"><code>#define prefix <var>spec</var></code></a></dt><!-- RDLabel: "#define prefix spec" -->
<dd>
<p>Try-Code や TT-Code などの、プレフィックス拡張型の入力方式における、
文字ヘルプの表示指定です。</p>
<ul>
<li><p>Try-Code の場合</p>
<pre>#define prefix /■/40/■□/回/</pre></li>
<li><p>TT-Code の場合</p>
<pre>#define prefix /▲/26,23/▲○/▲/:/▽/23,26/▽○/▽/</pre></li>
</ul>
<p>「拡張表を代表する文字 (漢索窓で利用される)」
「拡張プレフィックスのキー番号 (コンマ区切り)」
「<em>base stroke</em>
(拡張プレフィックスを除いた部分の各打鍵) を表す文字 (初打から順に並べる)」
「base stroke での二重打鍵と (もしあれば) 三重打鍵を表す文字 (並べる)」
を、スラッシュで区切って指定します。
指定が複数ある場合は、コロンで区切って並べます。</p>
<p><span class="sup">[<a href="#label-156">ver1.28</a>]</span>シフト打鍵は <code>"S12"</code> のように <code>"S"</code> をつけて指定します。</p>
</dd>
<dt><a name="label-155" id="label-155"><code>#define defguide "<var>string</var>"</code></a></dt><!-- RDLabel: "#define defguide "string"" -->
<dd>
<p><a href="#label-57">初期設定ファイル</a> の <a href="#label-72"><code>defg=<var>string</var></code></a> と同様です。
たとえば、phoenix 配列の<em>配字案内</em>は次のように指定します。</p>
<pre>#define defguide "亜域液牡凱梶丸偽漁吟芸元鯉剛坐雑事蛇什傷上笥税糎促濁中鍔努峠寧函備侮別頬脈唯乱令"</pre>
<p><code>defg=<var>string</var></code> と同時に指定された場合は、
<code>defg=<var>string</var></code> の設定が優先されます。</p>
</dd>
</dl>
<h2><a name="label-156" id="label-156">変更履歴</a></h2><!-- RDLabel: "変更履歴" -->
<dl>
<dt><a name="label-157" id="label-157">ver 1.28 (2010-01-01)</a></dt><!-- RDLabel: "ver 1.28 (2010-01-01)" -->
<dd>
<ul>
<li>シフト打鍵を用いる入力方式に対応:</li>
<li>テーブルファイルの書式を拡張:</li>
<li>外字入力補助機能:</li>
<li>強制練習モード:</li>
<li>シフト打鍵によるストロークロック機能:</li>
<li>漢直WinをOFFにしたときに各種モードを初期状態にリセットする: <code>offResetModes=<var>nnn...</var></code> オプション
    (木原さん [offResetModes])</li>
<li><code>offHide=2</code> の状態から一時的にウィンドウを表示する機能: <code>@w</code> 特殊定義
    (木原さん [tmpshowwin])</li>
<li><kbd>BackSpace</kbd> でストローク単位の消去: <code>weakBS=1</code> オプション</li>
<li>今打鍵したキーを入力する: <code>@^</code> 特殊定義</li>
<li>仮想鍵盤の配色・フォントのカスタマイズ機能: kwstyle.exe</li>
<li><code>useCtrlKey=1</code> の場合や XKeymacs との同時使用時の問題を修正:</li>
<li>C-h 等を XKeymacs と同様の方法で処理するオプション: <code>useCtrlKey=2</code> オプション
    ([漢直スレ4:253])</li>
<li><kbd>BackSpace</kbd> 等や @v のキー送出に keybd_event() を用いる: <code>outputVKeyMethod=1</code> オプション</li>
<li>文字送出方法に WM_UNICHAR を追加:</li>
<li>Unicode 文字への対応のテストコード(直接入力のみ、U+0080～U+3FFF限定): <code>outputUnicode=1</code> オプション</li>
<li>タイトルバーのカタカナモード・全角モード・句読点モードの表示順を t.tbl での配置に合わせて修正: ([Issue:1])</li>
<li>直前の文字を入力してから仮想鍵盤を表示するまでの時間指定: <code>displayHelpDelay=<var>n</var></code> オプション ([Issue:2])</li>
<li>熟語ガイドに「園、死、ム」などからはじまる熟語を登録しても
    いっさい表示されないバグをfix: ([漢直スレ4:132])</li>
<li>熟語ガイドを有効にしないと defguide（phoenix 配列の配字案内等）が
    表示されない問題を修正:</li>
<li><code>@v</code> や <kbd>Tab</kbd> を使って"h"を入力したときに内部バッファが
    間違って一文字削除されてしまう問題を修正:</li>
<li>Visual Studio 2008 でコンパイルが通るように修正:</li>
</ul>
</dd>
<dt><a name="label-158" id="label-158">ver 1.27f-20060325 (2006-03-25)</a></dt><!-- RDLabel: "ver 1.27f-20060325 (2006-03-25)" -->
<dd>
<ul>
<li>Word の図表番号挿入ダイアログで文字化けするバグの修正:
    (木原さん [tcode-ml:2665])</li>
</ul>
</dd>
<dt><a name="label-159" id="label-159">ver 1.27f (2006-03-03)</a></dt><!-- RDLabel: "ver 1.27f (2006-03-03)" -->
<dd>
<ul>
<li>部首合成変換の改良アルゴリズム:
    <code>bushuAlgo=YAMANOBE</code> オプション
    (山辺さん [tcode-ml:2652,2662])</li>
<li>活用形の交ぜ書き変換:
    <code>conjugationalMaze=2</code> オプション
    (山辺さん [tcode-ml:2644--2645])</li>
<li>フックと ImmSetCompositionString の組み合わせによる文字送出、および
    ウィンドウクラスごとに異なる文字の送出方法のサポート:
    (木原さん、および山辺さん [tcode-ml:2625--2634])</li>
<li>オプション名変更: <code>useWMIMECHAR</code> → <code>outputMethod</code></li>
<li>Firefox 1.5 で BackSpace で 2 文字消去されてしまう問題の対処:
    (木原さん [tcode-ml:2625])</li>
<li>半角かな変換: <code>enableHankakuKana=1</code> オプション</li>
<li>入力の統計: 
    <code>record=<var>file</var></code>, <code>stat=<var>file</var></code> オプション</li>
</ul>
</dd>
<dt><a name="label-160" id="label-160">ver 1.27e (2004-12-12)</a></dt><!-- RDLabel: "ver 1.27e (2004-12-12)" -->
<dd>
<ul>
<li>phoenix 配列の配字案内 (山辺さん [tcode-ml:2580,2583]):
    「<code>defg="..."</code>」オプション新設。</li>
<li>熟語ガイド辞書の書式拡張 (山辺さん [tcode-ml:2580,2583]):
    一行でマッチ対象パターンを複数指定可。</li>
<li>起動時 (オフ状態) にウィンドウを隠す (木原さん [tcode-ml:2579]):
    ショートカットのプロパティの「実行時の大きさ」で
    最小化を指定し、「<code>offHide=1</code>」オプションを指定。</li>
<li>phoenix.tbl: 英数字・記号と配字案内設定を含む。GPL 適用可。</li>
<li>tt.tbl: prefix 指定を含む。GPL 適用可。</li>
<li>テーブルファイルの書式拡張 (暫定):
    「<code>#define {table-name,prefix,defguide} <var>arg</var></code>」</li>
<li>半角/全角 の連想テーブルの誤りを修正</li>
</ul>
</dd>
<dt><a name="label-161" id="label-161">ver 1.27d (2004-08-10)</a></dt><!-- RDLabel: "ver 1.27d (2004-08-10)" -->
<dd>
<ul>
<li>岡俊行さんによる以下の変更 [tcode-ml:2572]
<ul>
<li>VC6 のプロジェクトファイル (kanchoku.dsw, kanchoku.dsp)</li>
<li>VC6 でコンパイルが通る (no error, no warning)</li>
<li>ON/OFF のホットキーとして、CTRLなどの修飾キーなしも使える
      (「<code>unmodifiedHotKey=<var>xx</var></code>」オプション新設)</li>
<li>ヒストリ関係の未初期化など、いくつかのバグフィックス</li>
</ul></li>
<li>マニュアル更新</li>
</ul>
</dd>
<dt><a name="label-162" id="label-162">ver 1.27c (2003-12-28)</a></dt><!-- RDLabel: "ver 1.27c (2003-12-28)" -->
<dd>
<ul>
<li>前置型変換中の後置型変換 (「連習スレ2」99氏 [590-591])</li>
<li>各種バグフィックス (「連習スレ2」99 氏)
<ul>
<li>キーリピート時の動作の改善 ([517])</li>
<li>256 色環境での表示の改善 ([522,537-538])</li>
<li>IE の 1 行入力フォームの中で - とか \ とかの直接入力 ([616])</li>
</ul></li>
<li>「<code>offHide=2</code>」オプション:
    モード ON 時も仮想鍵盤を非表示
    (※暫定機能、news.txt やマニュアルには未記載)。
    (「連習スレ2」[614,619])</li>
</ul>
</dd>
<dt><a name="label-163" id="label-163">ver 1.27b (2003-12-09)</a></dt><!-- RDLabel: "ver 1.27b (2003-12-09)" -->
<dd>
<ul>
<li>tut.tbl: 「<code>als</code> <code>@B</code>」の定義の脱落の修正 
    (木原英人さん [tcode-ml:2450])</li>
<li>src/moji.c (tblHandaku): 半濁音定義の「う/ヴ」「か/ヵ」「け/ヶ」の
    脱落を修正。</li>
<li>phoenix.tbl: 
    萩谷洋治さんの 
    <a href="http://www.h5.dion.ne.jp/~y_hagiya/hairetsu.html">phoenix 配列</a>
    のテーブルファイル追加。</li>
<li>使用コンパイラ: Borland C++ 5.5 -&gt; 5.5.1</li>
</ul>
</dd>
<dt><a name="label-164" id="label-164">ver 1.27a (2003-10-04)</a></dt><!-- RDLabel: "ver 1.27a (2003-10-04)" -->
<dd>
<ul>
<li>熟語ガイド機能追加 (「連習スレ2」99 氏 [102-106,208-209,211-212,240-241])</li>
<li>新設オプション「<code>outputSleep=<var>n</var></code>」
    (「連習スレ2」[99?])</li>
<li>「<code>shiftKana=1</code>」時のシフト打鍵の扱いの改善
    (木原英人さん [tcode-ml:2438])</li>
<li>部首合成辞書 kwbushu.rev の半角/全角文字の等価定義の誤りの修正</li>
<li>マュニアル微更新</li>
</ul>
</dd>
<dt><a name="label-165" id="label-165">ver 1.27 (2003-08-28)</a></dt><!-- RDLabel: "ver 1.27 (2003-08-28)" -->
<dd>
<ul>
<li>1.26eb 版をもとに拡張 ([tcode-ml:2437])
<ul>
<li>再帰的な前置型変換</li>
<li>ヒストリ入力機能</li>
<li>活用語の交ぜ書き変換</li>
<li>シフト打鍵によるかたかな入力</li>
<li>キャレット追従機能 (「連習スレ」816 氏)</li>
<li>送出メッセージとして WM_CHAR をデフォルトに</li>
<li>デザイン変更</li>
<li>「漢索板」のクローンソフト「漢索窓」を付属</li>
<li>新しい機能に対応したマニュアル</li>
</ul></li>
</ul>
</dd>
<dt><a name="label-166" id="label-166">(ver 1.26eb) (2002-05-05) (北嶋暁 [tcode-ml:2207])</a></dt><!-- RDLabel: "(ver 1.26eb) (2002-05-05) (北嶋暁 [tcode-ml:2207])" -->
<dd>
<ul>
<li><a href="http://openlab.jp/tcode/soft.html">kw126eb-20020505.zip</a> として
    パッケージ化</li>
</ul>
</dd>
<dt><a name="label-167" id="label-167">ver 1.26eb (2002-04-25) (木原英人 [tcode-ml:2151])</a></dt><!-- RDLabel: "ver 1.26eb (2002-04-25) (木原英人 [tcode-ml:2151])" -->
<dd>
<ul>
<li>部首合成変換機能 (前置型・後置型) の追加</li>
<li>後置変換に関するバグの修正</li>
</ul>
</dd>
<dt><a name="label-168" id="label-168">ver 1.26e (2002-01-15) (ゆせよしひろ [tcode-ml:2054])</a></dt><!-- RDLabel: "ver 1.26e (2002-01-15) (ゆせよしひろ [tcode-ml:2054])" -->
<dd>
<ul>
<li>キー入力・マウス操作の変更</li>
<li>後置型交ぜ書き変換機能 (文字数指定) の追加</li>
<li>文字ヘルプ機能の追加</li>
</ul>
</dd>
<dt><a name="label-169" id="label-169">ver 1.26 (2000-06-10) (徳岡宏樹)</a></dt><!-- RDLabel: "ver 1.26 (2000-06-10) (徳岡宏樹)" -->
<dd>
<ul>
<li><a href="http://t.pos.to/tc/kanchoku.html">「漢直Win」のオリジナル版</a></li>
<li>(バージョン 1.26 以前の履歴は、オリジナル版のドキュメント
    kanchoku.txt を参照)</li>
</ul>
</dd>
</dl>
<h2><a name="label-170" id="label-170">「漢直Win 1.26」からの変更点</a></h2><!-- RDLabel: "「漢直Win 1.26」からの変更点" -->
<p>「漢直Win」バージョン 1.27 では、設定ファイルの書式が変更されています。</p>
<p>「漢直Win」バージョン 1.26eb (kw126eb-20020505.zip) やそれ以前の版
(以下、「1.26 版」と総称) で、
設定ファイル等をカスタマイズして使用されていた方は、
以下の記述を参考に、再カスタマイズしてください。</p>
<p>設定ファイルの変更点</p>
<ul>
<li>【書式】
  1.26 版では独自形式でしたが、1.27 版では INI 形式になりました。
  特に、ファイルの先頭に、セクション名 <code>[kanchoku]</code> の記述が必要です。
  また、コメントは <code>#</code> ではなく、 <code>;</code> で記述してください。</li>
<li><p>【オプション】</p>
<ul>
<li>【<code>USEWMCHAR</code>】
    1.26 版では、WM_IME_CHAR のかわりに WM_CHAR を指定するオプションでしたが、
    このオプションは廃止されました。
    送出メッセージは、デフォルトで WM_CHAR が用いられます。
    WM_IME_CHAR を使用する場合には、
    <code>useWMIMECHAR=1</code> または <code>outputMethod=1</code> と指定してください。</li>
<li>【<code>SHOWHELP</code>】
    1.26 版では、文字ヘルプを表示するオプションでしたが、
    このオプションは廃止されました。
    文字ヘルプは常に表示され、非表示にすることはできなくなりました。</li>
<li>【<code>FORCEBS</code>】
    <code>hardBS</code> にリネームされました。</li>
</ul>
<p>詳しくは <a href="#label-57">初期設定ファイル</a> を参照してください。</p></li>
</ul>
<p>テーブルファイルの変更点</p>
<ul>
<li>【モードブロック】
  1.26 版では、
  (TUT-Code のかたかなモードに対応するため)
  テーブルファイルから、A モード・B モードの 
  2 つのモードブロックを読みこむ仕様になっていました。
  1.27 版では、
  かたかなモードを内部の変換ルーチンで処理するようになったこと、
  全角モードや句読点切り替え機能を新設したことに伴い、
  <del>モードブロックを 1 つだけ読みこむ仕様に変更されました。
  テーブルファイルに、モードブロックの定義が 2 つある場合、
  最初のものだけを読みこみ、2 番目のものは無視します。</del>
  <span class="sup">[<a href="#label-156">ver1.28</a>]</span>モードブロックを区別しない仕様に変更されました。
  テーブルファイルに、モードブロックの定義が 2 つある場合、
  両方の定義が読み込まれ、最初のものを2 番目のものが上書きすることになります。</li>
<li>【新設された特殊定義】
<ul>
<li><code>@Z</code> (<var>F_HANZEN</var>)</li>
<li><code>@K</code> (<var>F_HIRAKATA</var>)</li>
<li><code>@p</code> (<var>F_PUNCT</var>)</li>
<li><code>@!</code> (<var>F_HIST</var>)</li>
<li><code>@q</code> (<var>F_QUIT</var>)</li>
<li><code>@D</code> (<var>F_DAKUTEN</var>)</li>
<li><code>@P</code> (<var>F_HANDAKUTEN</var>)</li>
</ul></li>
<li>【名前が変更された特殊定義】
<ul>
<li><code>@b</code>: <var>F_BUSHU_PRE</var> ← <var>F_BUSHU</var></li>
<li><code>@m</code>: <var>F_MAZE_PRE</var> ← <var>F_MAZEGAKI_START</var></li>
<li><code>@B</code>: <var>F_BUSHU_POST</var> ← <var>F_KOUCHIBUSHU</var></li>
<li><code>@1</code> ～ <code>@9</code>: <var>F_MAZE_POSTn</var> ← <var>F_KOUCHIn</var></li>
<li><code>@h</code>: <var>F_HELP_BACKW</var> ← <var>F_HELP</var></li>
<li><code>@H</code>: <var>F_HELP_FORW</var> ← <var>F_HELP_NEXT</var></li>
<li><code>@v</code>: <var>F_VERB_FIRST</var> ← <var>F_VERTATIM</var></li>
</ul></li>
<li>【仕様が変更された特殊定義】
<ul>
<li><code>@s</code>:
    1.26 版ではモードブロックの切り替えでしたが、
    1.27 版ではかたかなモードの切り替え <code>@K</code> と同等になります。</li>
<li><code>@h</code>, <code>@H</code>:
    1.26 版では、<code>@h</code> が「最初の文字」のヘルプ、
    <code>@H</code> が「次の文字」のヘルプでした。
    1.27 版では、<code>@h</code> を続けて実行することで
    「次の文字」のヘルプを表示し、
    また <code>@H</code> で <code>@h</code> と逆方向に表示します。</li>
<li><code>@v</code>
    1.26 版では、常に、対応するキーの入力でした。
    バージョン 1.27 では、第 2 打鍵以降で指定された場合は、
    第 1 打鍵のキーの入力になります。</li>
</ul></li>
</ul>
<h2><a name="label-171" id="label-171">漢索窓</a></h2><!-- RDLabel: "漢索窓" -->
<table class="figure" summary="漢索窓の図示">
<caption>漢索窓</caption>
<tr>
<td>
<img src="img/kansaku.png" alt="漢索窓" title="漢索窓" />
</td>
</tr>
</table>

<p>「漢索窓」は、「漢索板」(<a href="#label-180">オリジナル版の漢直Win</a> の姉妹ソフト)
のクローンソフトです。
「漢索板」と同様に、文字の打ち方 (コード) を検索するツールです。</p>
<p>■「漢索板」は、
徳岡宏樹さんが作製されたソフトです。
<a href="http://t.pos.to/tc/">徳岡さんのページ</a>
から入手することができます。□</p>
<h3><a name="label-172" id="label-172">「漢索窓」の使用法</a></h3><!-- RDLabel: "「漢索窓」の使用法" -->
<p>kansaku.exe を起動すると、「漢索窓」のウィンドウが現れます。
「漢索板」と同様に、調べたい文字をクリップボードにコピーし、
「漢索窓」のウィンドウ内をダブルクリックすると、
対象文字の打鍵図が表示されます。</p>
<p>直接入力できない文字、すなわちストロークが割りあてられていない文字は、
無視します。
起動直後や、クリップボード内に入力できる文字がない場合は、
空白の打鍵図が表示されます。</p>
<ul>
<li>右クリックすると、打鍵図を置き換えるかわりに、末尾に追加して表示します。</li>
<li>ダブルクリックのかわりに <kbd>Enter</kbd> を、右クリックのかわりに
  <kbd>Space</kbd> を押してもかまいません。</li>
<li>配色は <a href="#label-33">文字ヘルプ</a> と共通です。</li>
<li>同一文字の打鍵図は、連続しては表示しません。</li>
</ul>
<p>現在のところ、以下のような制限 (仕様ともいう :-) があります。</p>
<ul>
<li>ウィンドウのリサイズには対応していません。</li>
<li>打鍵図の表示数に上限 (縦 15 × 横 7) があります。
  また、縦方向の表示数は固定です。</li>
<li>テーブルファイルに、直接定義されていない文字は検索できません。
  たとえば、TUT-Code のかたかなは検索できません。</li>
<li>表示するのは T-Code で用いる 40 キーのみです。
  特に、TUT-Code の記号は、第 1 打鍵だけが表示され、
  「記号キー」の <kbd>Space</kbd> は表示されません。</li>
</ul>
<h3><a name="label-173" id="label-173">「漢索窓」の設定ファイル</a></h3><!-- RDLabel: "「漢索窓」の設定ファイル" -->
<p>「漢直Win」と共通の設定ファイル kanchoku.ini の <code>[kansaku]</code> セクションにて
設定を行います。</p>
<p>設定できるオプションは、以下のとおりです。</p>
<dl>
<dt><a name="label-174" id="label-174"><code>tableFile=<var>file</var></code></a></dt><!-- RDLabel: "tableFile=file" -->
<dd>
<var>file</var> に、<a href="#label-116">テーブルファイル</a> を指定します。
この指定がない場合は、<code>[kanchoku]</code> セクションの
<code>tableFile=<var>file</var></code> の指定を読みこみます。
</dd>
<dt><a name="label-175" id="label-175"><code>certain=<var>file</var></code></a></dt><!-- RDLabel: "certain=file" -->
<dd>
<p><var>file</var> に <em>CERTAIN ファイル</em> を指定します。
CERTAIN ファイルに書かれた文字は、打鍵図を表示しません。</p>
<p>かなや句読点、すでに覚えてしまった漢字を書いておくと、
文字をまとめて検索する時に便利でしょう。</p>
<p>CERTAIN ファイルには、1 行に複数の文字を書くことができますが、
1 行が長くなりすぎないようにしてください。</p>
</dd>
<dt><a name="label-176" id="label-176"><code>dotStyle=<var>n</var></code></a></dt><!-- RDLabel: "dotStyle=n" -->
<dd>
デフォルト (<code>dotStyle=0</code> と等価) では、
オリジナルの「漢索板」や、「漢直Win」の仮想鍵盤に似た打鍵図を表示しますが、
<code>dotStyle=1</code> と指定すると、
<a href="#label-182">tc2</a> 
のヘルプや<em>橋田表</em>に似た打鍵図を表示します。
</dd>
<dt><a name="label-177" id="label-177"><code>nonUniq=<var>n</var></code></a></dt><!-- RDLabel: "nonUniq=n" -->
<dd>
<code>nonUniq=1</code> と指定すると、同一文字の複数回の入力をスキップしません。
</dd>
<dt><a name="label-178" id="label-178"><code>skipOutset=<var>n</var></code></a></dt><!-- RDLabel: "skipOutset=n" -->
<dd>
<code>skipOutset=1</code> と指定すると、外字をスキップします。
</dd>
</dl>
<h2><a name="label-179" id="label-179">関連 URL</a></h2><!-- RDLabel: "関連 URL" -->
<h3><a name="label-180" id="label-180">オリジナル版の漢直Win</a></h3><!-- RDLabel: "オリジナル版の漢直Win" -->
<ul>
<li><a href="http://t.pos.to/tc/">T-code修行中 漢字直接入力のすすめ</a> 
  … オリジナルの「漢直Win」の作者の徳岡宏樹さんのページ。
  オリジナル版の <a href="http://t.pos.to/tc/kanchoku.html">漢直Win</a> や、
  姉妹ソフトの
  <a href="http://t.pos.to/tc/kansaku.html">漢索板</a>
  が公開されています。</li>
</ul>
<h3><a name="label-181" id="label-181">各入力方式</a></h3><!-- RDLabel: "各入力方式" -->
<ul>
<li><a href="http://openlab.jp/tcode/">Home of T-Code</a> 
  … T-Code の本家ページ T-Code Laboratory。
  T-Code の紹介、関連ソフトの配布、T-Code メーリングリストの参加方法など。</li>
<li><a href="http://plone.crew.sfc.keio.ac.jp/groups/tut-code">Creative Workspace (CreW) - TUT-Code Web Site</a> 
  … TUT-Code の本家ページ。
  TUT-Code の紹介、練習テキストの配布、
  TUT-Code メーリングリストの参加方法など。</li>
<li><a href="http://www.asahi-net.or.jp/~QX5S-MSMR/">m(as)m home position</a> 
  …
  <a href="http://www.asahi-net.or.jp/~QX5S-MSMR/renkin/gcode/index.html">G-Code</a>
  の作者の増村成吾さんのページ。
  漢字直接入力法全般の情報が充実しています。</li>
</ul>
<h3><a name="label-182" id="label-182">直接入力ソフト</a></h3><!-- RDLabel: "直接入力ソフト" -->
<ul>
<li><p><a href="http://openlab.jp/tcode/tc2/index.html">Tコード入力環境tc2</a>
  … 北嶋暁さんの tc2 のページ。
  tc2 は Emacs 用の直接入力環境で、
  T-Code と TUT-Code を使うことができます。</p>
<p>「漢直Win 1.27」の部首合成変換辞書・交ぜ書き変換辞書は、
tc2 のパッケージに含まれるファイルから作成されています。</p></li>
</ul>
<h2><a name="label-183" id="label-183">謝辞</a></h2><!-- RDLabel: "謝辞" -->
<p><a href="http://t.pos.to/tc/kanchoku.html">オリジナル版漢直Win</a>
の作者である
徳岡宏樹
さん、</p>
<p>かたかなの <a href="#label-40">シフト打鍵による入力</a> に関するパッチをはじめ、
数々の助言を与えてくださった
木原英人
さん、</p>
<p><a href="http://openlab.jp/tcode/soft.html">1.26eb 版をパッケージング</a>
してくださった
北嶋暁
さん、</p>
<p><a href="#label-94">キャレット追従機能</a> のコードを書いてくださった
「<a href="http://pc.2ch.net/test/read.cgi/unix/1014523030/">【原理】T-Code連習マラソン【主義】</a>」の
816
さん、</p>
<p><a href="#label-34">熟語ガイド</a> 機能のコードをはじめ、
多くのコードを書いてくださった
山辺
さん、</p>
<p><a href="#label-156">1.27d 版</a>のコードやドキュメントを書いてくださった
岡俊行さん、</p>
<p>バグレポートや様々なアドバイスを与えてくださった、
T-Code メーリングリストや「連習スレ」のみなさま、</p>
<p>そして、「漢直Win」を使ってくださっているみなさま、</p>
<p>に、心から感謝いたします。</p>

</body>
</html>
